/* ensure header is the top stacking context */
.header { position: sticky; top: 0; z-index: 1000; }
.navbar { position: relative; z-index: 1001; }  /* inside header */

/* the backdrop should be below the header/menu */
.mobile-backdrop { z-index: 900; }  /* was 99; keep it below header */

/* MOBILE: show the menu panel ABOVE the backdrop and make it fixed */
@media (max-width: 768px) {
  /* hide by default (already in your CSS) */
  .navbar-nav,
  .navbar-actions { display: none; }

  /* when open, show as a single fixed panel under the header */
  .navbar.mobile-menu-open .navbar-nav {
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 60px;             /* header height */
    left: 0;
    right: 0;
    background: var(--white);
    box-shadow: var(--shadow-md);
    padding: var(--spacing-4);
    gap: var(--spacing-4);
    max-height: calc(100vh - 60px);
    overflow: auto;
    z-index: 1002;         /* ABOVE the backdrop and header */
  }

  /* put the action buttons inside the same scroll area instead of a second absolute layer */
  .navbar.mobile-menu-open .navbar-actions {
    display: flex;
    flex-direction: column;
    position: static;      /* no absolute overlay */
    gap: var(--spacing-4);
    margin-top: var(--spacing-4);
  }
}

/* optional: animate the hamburger to X (you already have this) */
.mobile-menu-toggle.active span:nth-child(1){ transform: rotate(45deg) translateY(6px); }
.mobile-menu-toggle.active span:nth-child(2){ opacity: 0; }
.mobile-menu-toggle.active span:nth-child(3){ transform: rotate(-45deg) translateY(-6px); }
