<div id="jobs" class="jobs-container">
  <!-- Header Skeleton -->
  @if (loading()) {
  <div class="employer-header">
    <div class="skeleton-header-content">
      <p-skeleton width="250px" height="2rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="300px" height="1.2rem"></p-skeleton>
    </div>
    <div class="skeleton-header-actions">
      <p-skeleton width="150px" height="2.5rem" styleClass="mb-0"></p-skeleton>
    </div>
  </div>
  }

  <!-- Actual Header -->
  @if (!loading()) {
  <div class="employer-header">
    <div>
      <h1 class="employer-title">Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</h1>
      <p class="subtitle">Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù†Ø´ÙˆØ±Ø©</p>
    </div>
    <div class="employer-actions">
      <a [routerLink]="['/companies/post-job']" class="btn btn-primary btn-new-job">
        <span class="btn-icon">â•</span>
        <span>Ù†Ø´Ø± ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø©</span>
      </a>
    </div>
  </div>
  }

  <div class="employer-content-card">
    <!-- Tab Navigation Skeleton -->
    @if (loading()) {
    <div class="filters-section">
      <div class="tab-navigation">
        @for (item of [1,2,3,4]; track item) {
        <p-skeleton width="150px" height="2.5rem" styleClass="mb-0"></p-skeleton>
        }
      </div>
    </div>
    }

    <!-- Tab Navigation -->
    @if (!loading()) {
    <div class="filters-section">
      <div class="tab-navigation">
        <button
          class="tab"
          [class.active]="activeTab() === 'active'"
          (click)="selectTab('active')"
        >
          <span class="tab-icon">âœ“</span>
          <span>Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù†Ø´Ø·Ø©</span>
          <span class="tab-count">({{ countActive() }})</span>
        </button>
        <button
          class="tab"
          [class.active]="activeTab() === 'paused'"
          (click)="selectTab('paused')"
        >
          <span class="tab-icon">â¸</span>
          <span>Ù…ØªÙˆÙ‚ÙØ©</span>
          <span class="tab-count">({{ countPaused() }})</span>
        </button>
        <button
          class="tab"
          [class.active]="activeTab() === 'closed'"
          (click)="selectTab('closed')"
        >
          <span class="tab-icon">âœ•</span>
          <span>Ù…ØºÙ„Ù‚Ø©</span>
          <span class="tab-count">({{ countClosed() }})</span>
        </button>
        <button
          class="tab"
          [class.active]="activeTab() === 'draft'"
          (click)="selectTab('draft')"
        >
          <span class="tab-icon">ğŸ“</span>
          <span>Ù…Ø³ÙˆØ¯Ø§Øª</span>
          <span class="tab-count">({{ countDraft() }})</span>
        </button>
      </div>
    </div>
    }

    <!-- Loading State Skeleton -->
    @if (loading()) {
      <div class="tab-content">
        @for (item of [1,2,3]; track item) {
        <div class="job-posting-item">
          <div class="job-posting-info">
            <p-skeleton width="60%" height="1.5rem" styleClass="mb-2"></p-skeleton>
            <div class="job-posting-meta">
              <p-skeleton width="150px" height="1rem" styleClass="mb-0"></p-skeleton>
              <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
              <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
            </div>
            <div class="job-posting-stats">
              <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
              <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
              <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
            </div>
          </div>
          <div class="job-posting-actions">
            <div class="status-control">
              <p-skeleton width="60px" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="100%" height="2.5rem" styleClass="mb-0"></p-skeleton>
            </div>
            <div class="action-buttons">
              <p-skeleton width="100%" height="2.5rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="100%" height="2.5rem" styleClass="mb-0"></p-skeleton>
            </div>
          </div>
        </div>
        }
      </div>
    }

    <!-- Empty State -->
    @if (!loading() && visibleJobs().length === 0) {
      <div class="tab-content">
        <div class="empty">
          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù ÙÙŠ Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø©.</p>
          <a [routerLink]="['/companies/post-job']" class="btn btn-primary">Ù†Ø´Ø± ÙˆØ¸ÙŠÙØ© Ø¬Ø¯ÙŠØ¯Ø©</a>
        </div>
      </div>
    }

    <!-- Jobs List -->
    @if (!loading() && visibleJobs().length > 0) {
      <div class="tab-content">
        @for (j of visibleJobs(); track j.id) {
          <div class="job-posting-item">
            <div class="job-posting-info">
              <div class="job-header">
                <h4 class="job-posting-title">
                  <a
                    [routerLink]="['/companies/post-job']"
                    [queryParams]="{ edit: j.slug }"
                    class="job-title-link"
                  >
                    {{ j.title }}
                  </a>
                </h4>
                <span class="job-status-badge" [ngClass]="'status-' + getJobStatus(j)">
                  @if (getJobStatus(j) === 'active') {
                    <span class="badge-icon">âœ“</span>
                    <span>Ù†Ø´Ø·Ø©</span>
                  } @else if (getJobStatus(j) === 'paused') {
                    <span class="badge-icon">â¸</span>
                    <span>Ù…ØªÙˆÙ‚ÙØ©</span>
                  } @else {
                    <span class="badge-icon">âœ•</span>
                    <span>Ù…ØºÙ„Ù‚Ø©</span>
                  }
                </span>
              </div>
              <div class="job-posting-meta">
                <span class="meta-item">
                  <span class="meta-icon">ğŸ“…</span>
                  <span>Ù†ÙØ´Ø±Øª ÙÙŠ {{ j.created_at | date:'yyyy/MM/dd' }}</span>
                </span>
                <span class="meta-item">
                  <span class="meta-icon">ğŸ“</span>
                  <span>{{ j.city || 'â€”' }}</span>
                </span>
                <span class="meta-item">
                  <span class="meta-icon">ğŸ’°</span>
                  <span>{{ salaryText(j) }}</span>
                </span>
              </div>
              <div class="job-posting-stats">
                <span class="stat-item stat-applicants">
                  <span class="stat-icon">ğŸ‘¥</span>
                  <span class="stat-value">{{ j.applications_count || 0 }}</span>
                  <span class="stat-label">Ù…ØªÙ‚Ø¯Ù…</span>
                </span>
                <span class="stat-item stat-views">
                  <span class="stat-icon">ğŸ‘ï¸</span>
                  <span class="stat-value">{{ j.views_count || 0 }}</span>
                  <span class="stat-label">Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                </span>
                @if (j.category) {
                  <span class="stat-item stat-category">
                    <span class="stat-icon">ğŸ·ï¸</span>
                    <span class="stat-label">{{ j.category.name }}</span>
                  </span>
                }
              </div>
            </div>
            <div class="job-posting-actions">
              <div class="status-control">
                <label for="status-{{ j.id }}" class="status-label">
                  <span class="label-icon">âš™ï¸</span>
                  Ø§Ù„Ø­Ø§Ù„Ø©:
                </label>
                <select
                  id="status-{{ j.id }}"
                  class="status-select"
                  [value]="getJobStatus(j)"
                  [disabled]="isUpdating(j.id)"
                  (change)="updateJobStatus(j, $any($event.target).value)"
                  title="ØªØºÙŠÙŠØ± Ø­Ø§Ù„Ø© Ø§Ù„ÙˆØ¸ÙŠÙØ©"
                >
                  <option value="active">Ù†Ø´Ø·Ø©</option>
                  <option value="paused">Ù…ØªÙˆÙ‚ÙØ©</option>
                  <option value="closed">Ù…ØºÙ„Ù‚Ø©</option>
                </select>
                @if (isUpdating(j.id)) {
                  <span class="updating-indicator">
                    <span class="spinner">â³</span>
                    Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...
                  </span>
                }
              </div>
              <div class="action-buttons">
                <a
                  [routerLink]="['/companies/applicants-for-job']"
                  [queryParams]="{ job: j.slug }"
                  class="btn-action btn-view-applicants"
                >
                  <span class="btn-icon">ğŸ‘¥</span>
                  <span>Ø¹Ø±Ø¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ†</span>
                </a>
                <a
                  [routerLink]="['/companies/post-job']"
                  [queryParams]="{ edit: j.slug }"
                  class="btn-action btn-edit"
                >
                  <span class="btn-icon">âœï¸</span>
                  <span>ØªØ­Ø±ÙŠØ±</span>
                </a>
              </div>
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
