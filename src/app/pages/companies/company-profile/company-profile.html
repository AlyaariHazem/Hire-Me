<!-- Company Profile Hero -->
<section class="company-profile-hero" *ngIf="company">
  <div class="container">
    <div class="company-header">
      <img
        [src]="company.logo || 'images/company-logo-1.jpg'"
        [alt]="company.name"
        [title]="company.name"
        class="company-logo-large"
        id="companyLogo"
      />
      <div class="company-main-info">
        <h1 id="companyName">{{ company.name }}</h1>
        <div class="company-industry" id="companyIndustry" *ngIf="company.industry">{{ company.industry }}</div>
        <div class="company-location" *ngIf="company.city || company.country">
          <span>๐</span>
          <span id="companyLocation">{{ company.city }}<span *ngIf="company.city && company.country">ุ </span>{{ company.country }}</span>
        </div>
      </div>
    </div>

    <div class="company-quick-stats">
      <div class="quick-stat" *ngIf="company.employees_count || company.size">
        <div class="quick-stat-number" id="employeeCount">{{ company.employees_count || company.size }}</div>
        <div class="quick-stat-label">ููุธู</div>
      </div>
      <div class="quick-stat">
        <div class="quick-stat-number" id="openJobsCount">{{ company.active_jobs }}</div>
        <div class="quick-stat-label">ูุธููุฉ ูุชุงุญุฉ</div>
      </div>
      <div class="quick-stat">
        <div class="quick-stat-number" id="followersCount">{{ company.followers_count }}</div>
        <div class="quick-stat-label">ูุชุงุจุน</div>
      </div>
      <div class="quick-stat" *ngIf="company.founded_year">
        <div class="quick-stat-number" id="foundedYear">{{ company.founded_year }}</div>
        <div class="quick-stat-label">ุณูุฉ ุงูุชุฃุณูุณ</div>
      </div>
    </div>

    <div class="company-actions">
      <button
        class="btn-follow-large"
        [class.following]="company.is_following"
        [disabled]="isTogglingFollow"
        (click)="toggleFollow()"
      >
        {{ isTogglingFollow ? 'ุฌุงุฑู...' : (company.is_following ? 'ุฅูุบุงุก ุงููุชุงุจุนุฉ' : 'ูุชุงุจุนุฉ ุงูุดุฑูุฉ') }}
      </button>
      <button class="btn-view-jobs-large" (click)="showTab('jobs')">
        ุนุฑุถ ุฌููุน ุงููุธุงุฆู
      </button>
    </div>
  </div>
</section>

<!-- Company Content -->
<section class="company-content" *ngIf="company">
  <div class="container">
    <div class="content-grid">
      <!-- Main Content -->
      <div class="main-content">
        <div class="content-tabs">
          <button
            class="tab-button"
            [class.active]="activeTab === 'overview'"
            (click)="showTab('overview')"
          >
            ูุธุฑุฉ ุนุงูุฉ
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'jobs'"
            (click)="showTab('jobs')"
          >
            ุงููุธุงุฆู
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'culture'"
            (click)="showTab('culture')"
          >
            ุซูุงูุฉ ุงูุนูู
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'reviews'"
            (click)="showTab('reviews')"
          >
            ุงูุชููููุงุช
          </button>
        </div>

        <!-- Overview Tab -->
        <div class="tab-content active" *ngIf="activeTab === 'overview'">
          <div class="company-description">
            <h3>ุนู ุงูุดุฑูุฉ</h3>
            <p>{{ company.description || 'ูุง ููุฌุฏ ูุตู ูุชุงุญ ููุดุฑูุฉ.' }}</p>
          </div>

          <!-- Static Values for now as they are not in JSON -->
          <div class="company-values">
            <h3>ููููุง</h3>
            <div class="values-grid">
              <div class="value-item">
                <div class="value-icon">๐</div>
                <div class="value-title">ุงูุงุจุชูุงุฑ</div>
                <div class="value-description">
                  ูุณุนู ุฏุงุฆูุงู ูุฅูุฌุงุฏ ุญููู ูุจุชูุฑุฉ ููุชุทูุฑุฉ
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">๐ค</div>
                <div class="value-title">ุงูุชุนุงูู</div>
                <div class="value-description">
                  ูุคูู ุจููุฉ ุงูุนูู ุงูุฌูุงุนู ูุงูุชุนุงูู
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">โญ</div>
                <div class="value-title">ุงูุฌูุฏุฉ</div>
                <div class="value-description">
                  ููุชุฒู ุจุฃุนูู ูุนุงููุฑ ุงูุฌูุฏุฉ ูู ุฌููุน ุฃุนูุงููุง
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">๐</div>
                <div class="value-title">ุงูููู</div>
                <div class="value-description">
                  ูุณุงุนุฏ ููุธูููุง ุนูู ุงูููู ูุงูุชุทูุฑ ุงููููู
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Jobs Tab -->
        @if (activeTab === 'jobs') {
        <div class="tab-content active">
          <h3>ุงููุธุงุฆู ุงููุชุงุญุฉ ({{ company.active_jobs }})</h3>
          <!-- Debug info -->
          <div style="font-size: 0.75rem; color: #666; margin-bottom: 1rem;">
            Debug: isLoadingJobs={{ isLoadingJobs }}, companyJobs.length={{ companyJobs.length }}
          </div>
          <div class="jobs-list">
            @if (isLoadingJobs) {
            <div class="jobs-loading">
              <p>ุฌุงุฑู ุชุญููู ุงููุธุงุฆู...</p>
            </div>
            } @else if (companyJobs.length === 0) {
            <div class="jobs-empty">
              <p>ูุง ุชูุฌุฏ ูุธุงุฆู ูุชุงุญุฉ ุญุงููุงู.</p>
            </div>
            } @else {
            @for (job of companyJobs; track job.id) {
            <article class="job-card-horizontal" [attr.data-job-id]="job.id">
              <img
                [src]="(job.company && job.company.logo) || company.logo || 'assets/images/company-placeholder.png'"
                alt="ุดุนุงุฑ ุงูุดุฑูุฉ"
                title="ุดุนุงุฑ ุงูุดุฑูุฉ"
                class="company-logo"
              />

              <div class="job-info">
                <h3 class="job-title">
                  <a
                    [routerLink]="['/jobseeker/job-details', job.slug]"
                    class="job-title-link"
                  >
                    {{ job.title }}
                  </a>
                </h3>

                <p class="company-name">{{ (job.company && job.company.name) || (company && company.name) || '-' }}</p>

                <div class="job-meta">
                  <span>๐ {{ cityLabel(job.city) }}</span>
                  <span>๐ฅ {{ formatSalary(job) }}</span>
                  <span>โฐ {{ getJobTypeLabel(job.job_type) }}</span>
                  <span>๐ {{ timeAgo(job.created_at) }}</span>
                </div>

                @if (job.description) {
                <p class="job-description">
                  {{ job.description }}
                </p>
                } @else {
                <p class="job-description">
                  {{ (job.category && job.category.name) || '-' }} โข {{ (job.company && job.company.city) || (company && company.city) || '-' }}
                </p>
                }
              </div>
            </article>
            }
            }
          </div>
        </div>
        }

        <!-- Culture Tab (Static for now) -->
        <div class="tab-content active" *ngIf="activeTab === 'culture'">
          <h3>ุซูุงูุฉ ุงูุนูู</h3>
          <div class="company-description">
            <p>
              ูู {{ company.name }}ุ ูุคูู ุจุฃู ุงูููุธููู ูู ุฃูู ุฃุตูููุง.
            </p>
            <!-- ... keep static content or hide ... -->
             <p>ุชูุงุตูู ุซูุงูุฉ ุงูุนูู...</p>
          </div>
        </div>

        <!-- Reviews Tab (Static for now) -->
        <div class="tab-content active" *ngIf="activeTab === 'reviews'">
          <h3>ุชููููุงุช ุงูููุธููู</h3>
          <div class="company-description">
             <div style="text-align: center; margin-bottom: 2rem">
              <div
                style="
                  font-size: 3rem;
                  color: var(--primary-color);
                  font-weight: bold;
                "
              >
                {{ company.average_rating || 0 }}
              </div>
              <div style="color: var(--gray-600)">ูู 5 ูุฌูู</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Company Info -->
        <div class="sidebar-card">
          <h3 class="sidebar-title">ูุนูููุงุช ุงูุดุฑูุฉ</h3>
          <div class="info-list">
            <div class="info-item" *ngIf="company.size">
              <span class="info-label">ุงูุญุฌู</span>
              <span class="info-value">{{ company.size }}</span>
            </div>
            <div class="info-item" *ngIf="company.founded_year">
              <span class="info-label">ุงูุชุฃุณูุณ</span>
              <span class="info-value">{{ company.founded_year }}</span>
            </div>
            <div class="info-item" *ngIf="company.city">
              <span class="info-label">ุงูููุฑ ุงูุฑุฆูุณู</span>
              <span class="info-value">{{ company.city }}</span>
            </div>
            <div class="info-item" *ngIf="company.industry">
              <span class="info-label">ุงูุชุฎุตุตุงุช</span>
              <span class="info-value">{{ company.industry }}</span>
            </div>
          </div>
        </div>

        <!-- Contact Info -->
        <div class="sidebar-card">
          <h3 class="sidebar-title">ูุนูููุงุช ุงูุงุชุตุงู</h3>
          <div class="contact-info">
            <div class="contact-item" *ngIf="company.website">
              <span class="contact-icon">๐</span>
              <a [href]="company.website" target="_blank">{{ company.website }}</a>
            </div>
            <div class="contact-item" *ngIf="company.email">
              <span class="contact-icon">๐ง</span>
              <span>{{ company.email }}</span>
            </div>
            <div class="contact-item" *ngIf="company.phone">
              <span class="contact-icon">๏ฟฝ</span>
              <span>{{ company.phone }}</span>
            </div>
            <div class="contact-item" *ngIf="company.address">
              <span class="contact-icon">๐</span>
              <span>{{ company.address }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Similar Companies (Static placeholder) -->
<section class="similar-companies" *ngIf="false">
  <div class="container">
    <h2 class="similar-title">ุดุฑูุงุช ูุดุงุจูุฉ</h2>
    <!-- ... -->
  </div>
</section>
