<!-- Company Profile Hero -->
@if (company) {
<section class="company-profile-hero">
  <div class="container">
    <div class="company-header">
      <img
        [src]="company.logo || 'images/company-logo-1.jpg'"
        [alt]="company.name"
        [title]="company.name"
        class="company-logo-large"
        id="companyLogo"
      />
      <div class="company-main-info">
        <h1 id="companyName">{{ company.name }}</h1>
        @if (company.industry) {
        <div class="company-industry" id="companyIndustry">{{ company.industry }}</div>
        }
        @if (company.city || company.country) {
        <div class="company-location">
          <span>ğŸ“</span>
          <span id="companyLocation">{{ company.city }}@if (company.city && company.country) {<span>ØŒ </span>}{{ company.country }}</span>
        </div>
        }
      </div>
    </div>

    <div class="company-quick-stats">
      @if (company.employees_count || company.size) {
      <div class="quick-stat">
        <div class="quick-stat-number" id="employeeCount">{{ company.employees_count || company.size }}</div>
        <div class="quick-stat-label">Ù…ÙˆØ¸Ù</div>
      </div>
      }
      <div class="quick-stat">
        <div class="quick-stat-number" id="openJobsCount">{{ company.active_jobs }}</div>
        <div class="quick-stat-label">ÙˆØ¸ÙŠÙØ© Ù…ØªØ§Ø­Ø©</div>
      </div>
      <div class="quick-stat">
        <div class="quick-stat-number" id="followersCount">{{ company.followers_count }}</div>
        <div class="quick-stat-label">Ù…ØªØ§Ø¨Ø¹</div>
      </div>
      @if (company.founded_year) {
      <div class="quick-stat">
        <div class="quick-stat-number" id="foundedYear">{{ company.founded_year }}</div>
        <div class="quick-stat-label">Ø³Ù†Ø© Ø§Ù„ØªØ£Ø³ÙŠØ³</div>
      </div>
      }
    </div>

    <div class="company-actions">
      <button
        class="btn-follow-large"
        [class.following]="company.is_following"
        [disabled]="isTogglingFollow"
        (click)="toggleFollow()"
      >
        {{ isTogglingFollow ? 'Ø¬Ø§Ø±ÙŠ...' : (company.is_following ? 'Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©' : 'Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø´Ø±ÙƒØ©') }}
      </button>
      <button class="btn-view-jobs-large" (click)="showTab('jobs')">
        Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
      </button>
    </div>
  </div>
</section>
}

<!-- Company Content -->
@if (company) {
<section class="company-content">
  <div class="container">
    <div class="content-grid">
      <!-- Main Content -->
      <div class="main-content">
        <div class="content-tabs">
          <button
            class="tab-button"
            [class.active]="activeTab === 'overview'"
            (click)="showTab('overview')"
          >
            Ù†Ø¸Ø±Ø© Ø¹Ø§Ù…Ø©
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'jobs'"
            (click)="showTab('jobs')"
          >
            Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'culture'"
            (click)="showTab('culture')"
          >
            Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„
          </button>
          <button
            class="tab-button"
            [class.active]="activeTab === 'reviews'"
            (click)="showTab('reviews')"
          >
            Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
          </button>
        </div>

        <!-- Overview Tab -->
        @if (activeTab === 'overview') {
        <div class="tab-content active">
          <div class="company-description">
            <h3>Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ©</h3>
            <p>{{ company.description || 'Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙˆØµÙ Ù…ØªØ§Ø­ Ù„Ù„Ø´Ø±ÙƒØ©.' }}</p>
          </div>

          <!-- Static Values for now as they are not in JSON -->
          <div class="company-values">
            <h3>Ù‚ÙŠÙ…Ù†Ø§</h3>
            <div class="values-grid">
              <div class="value-item">
                <div class="value-icon">ğŸš€</div>
                <div class="value-title">Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±</div>
                <div class="value-description">
                  Ù†Ø³Ø¹Ù‰ Ø¯Ø§Ø¦Ù…Ø§Ù‹ Ù„Ø¥ÙŠØ¬Ø§Ø¯ Ø­Ù„ÙˆÙ„ Ù…Ø¨ØªÙƒØ±Ø© ÙˆÙ…ØªØ·ÙˆØ±Ø©
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">ğŸ¤</div>
                <div class="value-title">Ø§Ù„ØªØ¹Ø§ÙˆÙ†</div>
                <div class="value-description">
                  Ù†Ø¤Ù…Ù† Ø¨Ù‚ÙˆØ© Ø§Ù„Ø¹Ù…Ù„ Ø§Ù„Ø¬Ù…Ø§Ø¹ÙŠ ÙˆØ§Ù„ØªØ¹Ø§ÙˆÙ†
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">â­</div>
                <div class="value-title">Ø§Ù„Ø¬ÙˆØ¯Ø©</div>
                <div class="value-description">
                  Ù†Ù„ØªØ²Ù… Ø¨Ø£Ø¹Ù„Ù‰ Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ø¬ÙˆØ¯Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø£Ø¹Ù…Ø§Ù„Ù†Ø§
                </div>
              </div>
              <div class="value-item">
                <div class="value-icon">ğŸ“ˆ</div>
                <div class="value-title">Ø§Ù„Ù†Ù…Ùˆ</div>
                <div class="value-description">
                  Ù†Ø³Ø§Ø¹Ø¯ Ù…ÙˆØ¸ÙÙŠÙ†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù…Ùˆ ÙˆØ§Ù„ØªØ·ÙˆØ± Ø§Ù„Ù…Ù‡Ù†ÙŠ
                </div>
              </div>
            </div>
          </div>
        </div>
        }

        <!-- Jobs Tab -->
        @if (activeTab === 'jobs') {
        <div class="tab-content active">
          <h3>Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø© ({{ company.active_jobs }})</h3>
          <!-- Debug info -->
          <div style="font-size: 0.75rem; color: #666; margin-bottom: 1rem;">
            Debug: isLoadingJobs={{ isLoadingJobs }}, companyJobs.length={{ companyJobs.length }}
          </div>
          <div class="jobs-list">
            @if (isLoadingJobs) {
            <div class="jobs-loading">
              <p>Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù...</p>
            </div>
            } @else if (companyJobs.length === 0) {
            <div class="jobs-empty">
              <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.</p>
            </div>
            } @else {
            @for (job of companyJobs; track job.id) {
            <article class="job-card-horizontal" [attr.data-job-id]="job.id">
              <img
                [src]="(job.company && job.company.logo) || company.logo || 'assets/images/company-placeholder.png'"
                alt="Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ©"
                title="Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙƒØ©"
                class="company-logo"
              />

              <div class="job-info">
                <h3 class="job-title">
                  <a
                    [routerLink]="['/jobseeker/job-details', job.slug]"
                    class="job-title-link"
                  >
                    {{ job.title }}
                  </a>
                </h3>

                <p class="company-name">{{ (job.company && job.company.name) || (company && company.name) || '-' }}</p>

                <div class="job-meta">
                  <span>ğŸ“ {{ cityLabel(job.city) }}</span>
                  <span>ğŸ”¥ {{ formatSalary(job) }}</span>
                  <span>â° {{ getJobTypeLabel(job.job_type) }}</span>
                  <span>ğŸ“… {{ timeAgo(job.created_at) }}</span>
                </div>

                @if (job.description) {
                <p class="job-description">
                  {{ job.description }}
                </p>
                } @else {
                <p class="job-description">
                  {{ (job.category && job.category.name) || '-' }} â€¢ {{ (job.company && job.company.city) || (company && company.city) || '-' }}
                </p>
                }
              </div>
            </article>
            }
            }
          </div>
        </div>
        }

        <!-- Culture Tab (Static for now) -->
        @if (activeTab === 'culture') {
        <div class="tab-content active">
          <h3>Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„</h3>
          <div class="company-description">
            <p>
              ÙÙŠ {{ company.name }}ØŒ Ù†Ø¤Ù…Ù† Ø¨Ø£Ù† Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ù‡Ù… Ø£Ù‡Ù… Ø£ØµÙˆÙ„Ù†Ø§.
            </p>
            <!-- ... keep static content or hide ... -->
             <p>ØªÙØ§ØµÙŠÙ„ Ø«Ù‚Ø§ÙØ© Ø§Ù„Ø¹Ù…Ù„...</p>
          </div>
        </div>
        }

        <!-- Reviews Tab (Static for now) -->
        @if (activeTab === 'reviews') {
        <div class="tab-content active">
          <h3>ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ†</h3>
          <div class="company-description">
             <div style="text-align: center; margin-bottom: 2rem">
              <div
                style="
                  font-size: 3rem;
                  color: var(--primary-color);
                  font-weight: bold;
                "
              >
                {{ company.average_rating || 0 }}
              </div>
              <div style="color: var(--gray-600)">Ù…Ù† 5 Ù†Ø¬ÙˆÙ…</div>
            </div>
          </div>
        </div>
        }
      </div>

      <!-- Sidebar -->
      <div class="sidebar">
        <!-- Company Info -->
        <div class="sidebar-card">
          <h3 class="sidebar-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø´Ø±ÙƒØ©</h3>
          <div class="info-list">
            @if (company.size) {
            <div class="info-item">
              <span class="info-label">Ø§Ù„Ø­Ø¬Ù…</span>
              <span class="info-value">{{ company.size }}</span>
            </div>
            }
            @if (company.founded_year) {
            <div class="info-item">
              <span class="info-label">Ø§Ù„ØªØ£Ø³ÙŠØ³</span>
              <span class="info-value">{{ company.founded_year }}</span>
            </div>
            }
            @if (company.city) {
            <div class="info-item">
              <span class="info-label">Ø§Ù„Ù…Ù‚Ø± Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</span>
              <span class="info-value">{{ company.city }}</span>
            </div>
            }
            @if (company.industry) {
            <div class="info-item">
              <span class="info-label">Ø§Ù„ØªØ®ØµØµØ§Øª</span>
              <span class="info-value">{{ company.industry }}</span>
            </div>
            }
          </div>
        </div>

        <!-- Contact Info -->
        <div class="sidebar-card">
          <h3 class="sidebar-title">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„</h3>
          <div class="contact-info">
            @if (company.website) {
            <div class="contact-item">
              <span class="contact-icon">ğŸŒ</span>
              <a [href]="company.website" target="_blank">{{ company.website }}</a>
            </div>
            }
            @if (company.email) {
            <div class="contact-item">
              <span class="contact-icon">ğŸ“§</span>
              <span>{{ company.email }}</span>
            </div>
            }
            @if (company.phone) {
            <div class="contact-item">
              <span class="contact-icon">ï¿½</span>
              <span>{{ company.phone }}</span>
            </div>
            @if (company.address) {
            <div class="contact-item">
              <span class="contact-icon">ğŸ“</span>
              <span>{{ company.address }}</span>
            </div>
            }
            }
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
}

<!-- Similar Companies (Static placeholder) -->
@if (false) {
<section class="similar-companies">
  <div class="container">
    <h2 class="similar-title">Ø´Ø±ÙƒØ§Øª Ù…Ø´Ø§Ø¨Ù‡Ø©</h2>
    <!-- ... -->
  </div>
</section>
}
