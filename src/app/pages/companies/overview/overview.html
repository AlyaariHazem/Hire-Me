<!-- Overview Tab -->
<div id="overview" class="tab-content active">
  <div class="employer-header">
    <h1 class="employer-title">ูุฑุญุจุงู ุจู ูู ููุญุฉ ุงูุชุญูู</h1>
    <div class="employer-actions">
      <a routerLink="/companies/post-job" class="btn btn-primary">ูุดุฑ ูุธููุฉ ุฌุฏูุฏุฉ</a>
      <a href="search-candidates.html" class="btn btn-secondary"
        >ุงูุจุญุซ ุนู ูุฑุดุญูู</a
      >
    </div>
  </div>

  <!-- Stats Grid Skeleton -->
  @if (loadingJobs() || loadingApplications()) {
  <div class="employer-stats-grid">
    @for (item of [1,2,3,4]; track item) {
    <div class="employer-stat-card">
      <div class="employer-stat-header">
        <p-skeleton width="120px" height="1.2rem" styleClass="mb-0"></p-skeleton>
        <p-skeleton width="30px" height="30px" shape="circle" styleClass="mb-0"></p-skeleton>
      </div>
      <p-skeleton width="80px" height="2.5rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="100px" height="1rem"></p-skeleton>
    </div>
    }
  </div>
  }

  <!-- Stats Grid -->
  @if (!loadingJobs() && !loadingApplications()) {
  <div class="employer-stats-grid">
    <div class="employer-stat-card">
      <div class="employer-stat-header">
        <span class="employer-stat-title">ุงููุธุงุฆู ุงููุดุทุฉ</span>
        <span class="employer-stat-icon">๐ผ</span>
      </div>
      <div class="employer-stat-value">5</div>
      <div class="employer-stat-change">+2 ูุฐุง ุงูุดูุฑ</div>
    </div>

    <div class="employer-stat-card">
      <div class="employer-stat-header">
        <span class="employer-stat-title">ุฅุฌูุงูู ุงููุชูุฏููู</span>
        <span class="employer-stat-icon">๐ฅ</span>
      </div>
      <div class="employer-stat-value">89</div>
      <div class="employer-stat-change">+23 ูุฐุง ุงูุฃุณุจูุน</div>
    </div>

    <div class="employer-stat-card">
      <div class="employer-stat-header">
        <span class="employer-stat-title">ูุชูุฏููู ุฌุฏุฏ</span>
        <span class="employer-stat-icon">๐</span>
      </div>
      <div class="employer-stat-value">12</div>
      <div class="employer-stat-change">ุงูููู</div>
    </div>

    <div class="employer-stat-card">
      <div class="employer-stat-header">
        <span class="employer-stat-title">ูุดุงูุฏุงุช ุงููุธุงุฆู</span>
        <span class="employer-stat-icon">๐๏ธ</span>
      </div>
      <div class="employer-stat-value">1,234</div>
      <div class="employer-stat-change">+156 ูุฐุง ุงูุฃุณุจูุน</div>
    </div>
  </div>
  }

  <!-- Quick Actions Skeleton -->
  @if (loadingJobs() || loadingApplications()) {
  <div class="quick-actions-grid">
    @for (item of [1,2,3,4]; track item) {
    <div class="quick-action-employer skeleton-quick-action">
      <p-skeleton width="60px" height="60px" shape="circle" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="80%" height="1.5rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="100%" height="1rem"></p-skeleton>
    </div>
    }
  </div>
  }

  <!-- Quick Actions -->
  @if (!loadingJobs() && !loadingApplications()) {
  <div class="quick-actions-grid">
    <a routerLink="/companies/post-job" class="quick-action-employer">
      <div class="quick-action-employer-icon">โ</div>
      <h3 class="quick-action-employer-title">ูุดุฑ ูุธููุฉ ุฌุฏูุฏุฉ</h3>
      <p class="quick-action-employer-desc">
        ุฃุถู ูุธููุฉ ุฌุฏูุฏุฉ ูุงุฌุฐุจ ุฃูุถู ุงูููุงูุจ
      </p>
    </a>

    <a href="search-candidates.html" class="quick-action-employer">
      <div class="quick-action-employer-icon">๐</div>
      <h3 class="quick-action-employer-title">ุงูุจุญุซ ุนู ูุฑุดุญูู</h3>
      <p class="quick-action-employer-desc">ุงุจุญุซ ูู ูุงุนุฏุฉ ุจูุงูุงุช ุงููุฑุดุญูู</p>
    </a>

    <a href="company-profile.html" class="quick-action-employer">
      <div class="quick-action-employer-icon">๐ข</div>
      <h3 class="quick-action-employer-title">ุชุญุฏูุซ ููู ุงูุดุฑูุฉ</h3>
      <p class="quick-action-employer-desc">ุญุฏุซ ูุนูููุงุช ูุตูุฑ ุงูุดุฑูุฉ</p>
    </a>

    <a
      href="#analytics"
      class="quick-action-employer"
      onclick="switchEmployerTab('analytics')"
    >
      <div class="quick-action-employer-icon">๐</div>
      <h3 class="quick-action-employer-title">ุนุฑุถ ุงูุชุญูููุงุช</h3>
      <p class="quick-action-employer-desc">ุชุงุจุน ุฃุฏุงุก ูุธุงุฆูู ูุฅุนูุงูุงุชู</p>
    </a>
  </div>
  }

  <!-- Content Grid -->
  <div class="employer-content-grid">
    <!-- Recent Job Postings -->
    <div class="employer-content-card">
      <div class="card-header">
        <h2 class="card-title">ุงููุธุงุฆู ุงูููุดูุฑุฉ ูุคุฎุฑุงู</h2>
        <a 
          (click)="viewAllJobs()"
          class="card-action clickable"
          >ุนุฑุถ ุงููู</a
        >
      </div>

      @if (loadingJobs()) {
        <div class="jobs-skeleton">
          @for (item of [1,2,3]; track item) {
          <div class="job-posting-item">
            <div class="job-posting-info">
              <p-skeleton width="60%" height="1.5rem" styleClass="mb-2"></p-skeleton>
              <div class="job-posting-meta">
                <p-skeleton width="100px" height="1rem" styleClass="mb-0"></p-skeleton>
                <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
                <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
              </div>
              <div class="job-posting-stats">
                <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
                <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
                <p-skeleton width="100px" height="1rem" styleClass="mb-0"></p-skeleton>
              </div>
            </div>
            <p-skeleton width="80px" height="2rem" styleClass="mb-0"></p-skeleton>
          </div>
          }
        </div>
      } @else if (recentJobs().length === 0) {
        <div class="empty-state">
          <p>ูุง ุชูุฌุฏ ูุธุงุฆู ููุดูุฑุฉ</p>
        </div>
      } @else {
        @for (job of recentJobs(); track job.id) {
          <div class="job-posting-item">
            <div class="job-posting-info">
              <h4 class="job-posting-title">{{ job.title }}</h4>
              <div class="job-posting-meta">
                <span>ููุดุฑุช {{ getTimeAgoForJob(job.created_at) }}</span>
                <span>{{ job.city || 'ุบูุฑ ูุญุฏุฏ' }}</span>
                <span>{{ formatSalaryRange(job) }}</span>
              </div>
              <div class="job-posting-stats">
                <span>{{ job.applications_count || 0 }} ูุชูุฏู</span>
                <span>{{ job.views_count || 0 }} ูุดุงูุฏุฉ</span>
                @if (job.category) {
                  <span>{{ job.category.name }}</span>
                }
              </div>
            </div>
            <span 
              class="job-status" 
              [ngClass]="getJobStatusClass(job)">
              {{ getJobStatusLabel(job) }}
            </span>
          </div>
        }
      }
    </div>

    <!-- Recent Candidates -->
    <div class="employer-content-card">
      <div class="card-header">
        <h2 class="card-title">ุงููุชูุฏููู ุงูุฌุฏุฏ</h2>
        <a
          (click)="viewAllApplicants()"
          class="card-action clickable"
          >ุนุฑุถ ุงููู</a
        >
      </div>

      @if (loadingApplications()) {
        <div class="applications-skeleton">
          @for (item of [1,2,3,4]; track item) {
          <div class="candidate-item">
            <p-skeleton width="50px" height="50px" shape="circle" styleClass="skeleton-avatar"></p-skeleton>
            <div class="candidate-info">
              <p-skeleton width="60%" height="1.3rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="50%" height="1rem" styleClass="mb-2"></p-skeleton>
              <div class="candidate-meta">
                <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
                <p-skeleton width="150px" height="1rem" styleClass="mb-0"></p-skeleton>
              </div>
            </div>
            <div class="candidate-actions">
              <p-skeleton width="80px" height="1.5rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="100px" height="2rem" styleClass="mb-0"></p-skeleton>
            </div>
          </div>
          }
        </div>
      } @else if (recentApplications().length === 0) {
        <div class="empty-state">
          <p>ูุง ุชูุฌุฏ ุทูุจุงุช ูุชูุฏูุฉ ุฌุฏูุฏุฉ</p>
        </div>
      } @else {
        @for (app of recentApplications(); track app.id) {
          <div class="candidate-item">
            <div class="candidate-avatar">
              @if (app.applicant?.profile_picture) {
                <img
                  [src]="app.applicant?.profile_picture || ''"
                  [alt]="getApplicantName(app)"
                  [title]="getApplicantName(app)"
                  title="Applicant profile picture"
                  (error)="handleImageError($event)"
                />
              }
              <span [style.display]="app.applicant?.profile_picture ? 'none' : 'flex'">
                {{ getApplicantInitials(app) }}
              </span>
            </div>
            <div class="candidate-info">
              <h4 class="candidate-name">{{ getApplicantName(app) }}</h4>
              <p class="candidate-title">{{ getApplicantTitle(app) }}</p>
              <div class="candidate-meta">
                <span>ุชูุฏู {{ getTimeAgo(app.applied_at) }}</span>
                @if (app.job.title) {
                  <span>{{ app.job.title }}</span>
                }
              </div>
            </div>
            <div class="candidate-actions">
              <span 
                class="application-status" 
                [ngClass]="getStatusClass(app.status)">
                {{ getStatusLabel(app.status) }}
              </span>
              <button 
                class="btn btn-small btn-primary"
                (click)="viewApplicantProfile(app)">
                ุนุฑุถ ุงูููู
              </button>
            </div>
          </div>
        }
      }
    </div>
  </div>
</div>
