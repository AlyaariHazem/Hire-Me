<div id="applicants" class="applicants-container">
  <!-- Header Skeleton -->
  @if (loading()) {
  <div class="employer-header">
    <div class="skeleton-header-content">
      <p-skeleton width="250px" height="2rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="300px" height="1.2rem"></p-skeleton>
    </div>
    <div class="skeleton-header-actions">
      <p-skeleton width="180px" height="2.5rem" styleClass="mb-0"></p-skeleton>
    </div>
  </div>
  }

  <!-- Actual Header -->
  @if (!loading()) {
  <div class="employer-header">
    <div>
      <h1 class="employer-title">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…ÙŠÙ†</h1>
      <p class="subtitle">Ø¹Ø±Ø¶ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø¬Ù…ÙŠØ¹ Ø·Ù„Ø¨Ø§Øª Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…</p>
    </div>
    <div class="employer-actions">
      <a [routerLink]="['/companies/manage-jobs']" class="btn btn-secondary">
        Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
      </a>
    </div>
  </div>
  }

  <div class="employer-content-card">
    <!-- Filters Skeleton -->
    @if (loading()) {
    <div class="filters-section">
      <div class="tab-navigation">
        @for (item of [1,2,3,4,5]; track item) {
        <p-skeleton width="140px" height="2.5rem" styleClass="mb-0"></p-skeleton>
        }
      </div>
      <div class="job-filter">
        <p-skeleton width="150px" height="1.5rem" styleClass="mb-0"></p-skeleton>
        <p-skeleton width="200px" height="2.5rem" styleClass="mb-0"></p-skeleton>
      </div>
    </div>
    }

    <!-- Filters -->
    @if (!loading()) {
    <div class="filters-section">
      <div class="tab-navigation">
        <button 
          class="tab" 
          [class.active]="statusFilter() === 'all'"
          (click)="setStatusFilter('all')">
          Ø§Ù„ÙƒÙ„ ({{ statusCounts().all }})
        </button>
        <button 
          class="tab" 
          [class.active]="statusFilter() === 'pending'"
          (click)="setStatusFilter('pending')">
          Ù‚ÙŠØ¯ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± ({{ statusCounts().pending }})
        </button>
        <button 
          class="tab" 
          [class.active]="statusFilter() === 'reviewed'"
          (click)="setStatusFilter('reviewed')">
          ØªÙ… Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© ({{ statusCounts().reviewed }})
        </button>
        <button 
          class="tab" 
          [class.active]="statusFilter() === 'accepted'"
          (click)="setStatusFilter('accepted')">
          Ù…Ù‚Ø¨ÙˆÙ„ ({{ statusCounts().accepted }})
        </button>
        <button 
          class="tab" 
          [class.active]="statusFilter() === 'rejected'"
          (click)="setStatusFilter('rejected')">
          Ù…Ø±ÙÙˆØ¶ ({{ statusCounts().rejected }})
        </button>
      </div>

      <!-- Job Filter -->
      @if (uniqueJobs().length > 0) {
        <div class="job-filter">
          <label>ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙˆØ¸ÙŠÙØ©:</label>
          <select 
            class="form-select"
            [value]="jobFilter() || ''"
            title="ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙˆØ¸ÙŠÙØ©"
            aria-label="ØªØµÙÙŠØ© Ø­Ø³Ø¨ Ø§Ù„ÙˆØ¸ÙŠÙØ©"
            (change)="setJobFilter($any($event.target).value ? +$any($event.target).value : null)">
            <option value="">Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</option>
            @for (job of uniqueJobs(); track job.id) {
              <option [value]="job.id">{{ job.title }}</option>
            }
          </select>
        </div>
      }
    </div>
    }

    <!-- Loading State Skeleton -->
    @if (loading()) {
      <div class="tab-content">
        @for (item of [1,2,3]; track item) {
        <div class="application-item">
          <div class="application-info">
            <div class="candidate-header">
              <p-skeleton width="60px" height="60px" shape="circle" styleClass="skeleton-avatar"></p-skeleton>
              <div class="candidate-details">
                <p-skeleton width="200px" height="1.5rem" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="250px" height="1rem" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="60%" height="1rem" styleClass="mb-2"></p-skeleton>
                <div class="candidate-meta">
                  <p-skeleton width="150px" height="1rem" styleClass="mb-0"></p-skeleton>
                  <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
                  <p-skeleton width="100px" height="1rem" styleClass="mb-0"></p-skeleton>
                </div>
                <p-skeleton width="100%" height="3rem" styleClass="mb-0 mt-2"></p-skeleton>
              </div>
            </div>
          </div>
          <div class="application-actions">
            <p-skeleton width="100px" height="1.5rem" styleClass="mb-2"></p-skeleton>
            <div class="action-buttons">
              <p-skeleton width="100%" height="2.5rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="100%" height="2.5rem" styleClass="mb-0"></p-skeleton>
            </div>
            <div class="status-actions">
              <p-skeleton width="80px" height="2.5rem" styleClass="mb-0"></p-skeleton>
              <p-skeleton width="80px" height="2.5rem" styleClass="mb-0"></p-skeleton>
            </div>
          </div>
        </div>
        }
      </div>
    }

    <!-- Empty State -->
    @if (!loading() && filteredApplications().length === 0) {
      <div class="tab-content">
        <div class="empty">
          <p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ù…ØªÙ‚Ø¯Ù…Ø©</p>
        </div>
      </div>
    }

    <!-- Applications List -->
    @if (!loading() && filteredApplications().length > 0) {
      <div class="tab-content">
        @for (app of filteredApplications(); track app.id) {
          <div class="application-item">
            <div class="application-info">
              <div class="candidate-header">
                <div class="candidate-avatar">
                  @if (app.applicant?.profile_picture) {
                    <img 
                      [src]="app.applicant?.profile_picture || ''" 
                      [alt]="getApplicantName(app)"
                      [title]="getApplicantName(app)"
                      title="Applicant profile picture"
                      (error)="handleImageError($event)">
                  }
                  <span [style.display]="app.applicant?.profile_picture ? 'none' : 'flex'">
                    {{ getApplicantInitials(app) }}
                  </span>
                </div>
                <div class="candidate-details">
                  <h4 class="candidate-name">
                    {{ getApplicantName(app) }}
                  </h4>
                  @if (app.job) {
                    <p class="job-applied-for">
                      <strong>Ø§Ù„ÙˆØ¸ÙŠÙØ©:</strong> 
                      <a 
                        (click)="viewJobApplicants(app.job.id, app.job.slug)"
                        class="job-link">
                        {{ app.job.title }}
                      </a>
                    </p>
                  }
                  @if (app.applicant?.bio) {
                    <p class="candidate-title">
                      {{ app.applicant?.bio }}
                    </p>
                  }
                  <div class="candidate-meta">
                    <span>ğŸ“§ {{ app.applicant?.email || 'ØºÙŠØ± Ù…ØªÙˆÙØ±' }}</span>
                    @if (app.applicant?.phone) {
                      <span>ğŸ“ {{ getApplicantPhone(app) }}</span>
                    }
                    <span>ğŸ“… {{ formatDate(app.applied_at) }}</span>
                  </div>
                  @if (app.cover_letter) {
                    <div class="cover-letter-preview">
                      <p class="cover-letter-text">{{ app.cover_letter }}</p>
                    </div>
                  }
                </div>
              </div>
            </div>

            <div class="application-actions">
              <span 
                class="application-status" 
                [ngClass]="getStatusClass(app.status)">
                {{ getStatusLabel(app) }}
              </span>
              <div class="action-buttons">
                <button 
                  class="btn btn-small btn-primary"
                  (click)="viewApplication(app)">
                  Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ§ØµÙŠÙ„
                </button>
                @if (app.resume) {
                  <button 
                    class="btn btn-small btn-secondary"
                    (click)="downloadResume(app)">
                    ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
                  </button>
                }
              </div>
              @if (app.status === 'pending') {
                <div class="status-actions">
                  <button 
                    class="btn-action btn-accept"
                    [disabled]="updatingStatus.has(app.id)"
                    (click)="updateApplicationStatus(app.id, 'accepted')"
                    title="Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
                    type="button">
                    @if (updatingStatus.has(app.id)) {
                      <span class="btn-icon">â³</span>
                      <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
                    } @else {
                      <span class="btn-icon">âœ“</span>
                      <span>Ù‚Ø¨ÙˆÙ„</span>
                    }
                  </button>
              <button 
                class="btn-action btn-reject"
                [disabled]="updatingStatus.has(app.id)"
                (click)="confirmReject(app.id)"
                title="Ø±ÙØ¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
                type="button">
                    @if (updatingStatus.has(app.id)) {
                      <span class="btn-icon">â³</span>
                      <span>Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
                    } @else {
                      <span class="btn-icon">âœ•</span>
                      <span>Ø±ÙØ¶</span>
                    }
                  </button>
                </div>
              }
            </div>
          </div>
        }
      </div>
    }

    <!-- Pagination -->
    @if (!loading() && totalPages() > 1) {
      <div class="pagination">
        <button 
          class="pagination-btn"
          [class.disabled]="!hasPrevious()"
          [disabled]="!hasPrevious()"
          (click)="previousPage()">
          Ø§Ù„Ø³Ø§Ø¨Ù‚
        </button>
        
        <div class="pagination-pages">
          @for (page of getPageNumbers(); track page) {
            <button 
              class="pagination-page"
              [class.active]="page === currentPage()"
              (click)="goToPage(page)">
              {{ page }}
            </button>
          }
        </div>

        <button 
          class="pagination-btn"
          [class.disabled]="!hasNext()"
          [disabled]="!hasNext()"
          (click)="nextPage()">
          Ø§Ù„ØªØ§Ù„ÙŠ
        </button>
      </div>

      <div class="pagination-info">
        <p>Ø¹Ø±Ø¶ {{ ((currentPage() - 1) * page_size()) + 1 }} - {{ Math.min(currentPage() * page_size(), totalCount()) }} Ù…Ù† {{ totalCount() }} Ù…ØªÙ‚Ø¯Ù…</p>
      </div>
    }
  </div>
</div>

<!-- Application Details Modal (same as applicants-for-job) -->
@if (showDetailsModal) {
  <div class="modal-backdrop" (click)="closeDetailsModal()">
    <div class="modal-dialog" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø·Ù„Ø¨</h2>
        <button class="modal-close" (click)="closeDetailsModal()">Ã—</button>
      </div>

      <div class="modal-body">
        @if (loadingDetails) {
          <div class="loading-state">
            <div class="skeleton-details">
              <p-skeleton width="100%" height="1.5rem" styleClass="mb-3"></p-skeleton>
              <p-skeleton width="100%" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="80%" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="90%" height="1rem" styleClass="mb-4"></p-skeleton>
              <p-skeleton width="100%" height="1.5rem" styleClass="mb-3"></p-skeleton>
              <p-skeleton width="100%" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="75%" height="1rem" styleClass="mb-2"></p-skeleton>
              <p-skeleton width="85%" height="1rem" styleClass="mb-4"></p-skeleton>
            </div>
          </div>
        } @else if (selectedApplication) {
          <!-- Applicant Profile Header -->
          <div class="applicant-profile-header">
            <div class="profile-avatar-large">
              @if (selectedApplication.applicant?.profile_picture) {
                <img 
                  [src]="selectedApplication.applicant?.profile_picture || ''" 
                  [alt]="getApplicantName(selectedApplication)"
                  [title]="getApplicantName(selectedApplication)"
                  title="ØµÙˆØ±Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
                  (error)="handleImageError($event)">
              }
              <span [style.display]="selectedApplication.applicant?.profile_picture ? 'none' : 'flex'">
                {{ getApplicantInitials(selectedApplication) }}
              </span>
            </div>
            <div class="profile-info">
              <h2 class="profile-name">{{ getApplicantName(selectedApplication) }}</h2>
              @if (selectedApplication.applicant?.bio) {
                <p class="profile-bio">{{ selectedApplication.applicant?.bio }}</p>
              }
              <div class="profile-badges">
                <span class="status-badge" [ngClass]="getStatusClass(selectedApplication.status)">
                  {{ getStatusLabel(selectedApplication) }}
                </span>
                @if (selectedApplication.applicant?.is_verified) {
                  <span class="verified-badge-large">
                    <span class="badge-icon">âœ“</span>
                    <span>Ù…ÙˆØ«Ù‚</span>
                  </span>
                }
              </div>
            </div>
          </div>

          <!-- Job Information -->
          <div class="detail-section">
            <h3>
              <span class="section-icon">ğŸ’¼</span>
              Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ÙˆØ¸ÙŠÙØ©
            </h3>
            <div class="detail-content">
              <div class="detail-item">
                <span class="detail-label">Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ©:</span>
                <span class="detail-value">{{ selectedApplication.job.title }}</span>
              </div>
              @if (selectedApplication.job.category) {
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„ÙØ¦Ø©:</span>
                  <span class="detail-value">{{ selectedApplication.job.category.name || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</span>
                </div>
              }
              <div class="detail-item">
                <span class="detail-label">Ù†ÙˆØ¹ Ø§Ù„ÙˆØ¸ÙŠÙØ©:</span>
                <span class="detail-value">{{ getJobTypeLabel(selectedApplication.job.job_type || '') }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø¨Ø±Ø©:</span>
                <span class="detail-value">{{ getExperienceLevelLabel(selectedApplication.job.experience_level || '') }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø©:</span>
                <span class="detail-value">{{ selectedApplication.job.city || 'ØºÙŠØ± Ù…Ø­Ø¯Ø¯' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">Ø§Ù„Ø±Ø§ØªØ¨:</span>
                <span class="detail-value">
                  {{ formatSalaryRange(
                    selectedApplication.job.salary_min || null,
                    selectedApplication.job.salary_max || null,
                    selectedApplication.job.is_salary_negotiable || false
                  ) }}
                </span>
              </div>
              @if (selectedApplication.job.application_deadline) {
                <div class="detail-item">
                  <span class="detail-label">Ø¢Ø®Ø± Ù…ÙˆØ¹Ø¯ Ù„Ù„ØªÙ‚Ø¯ÙŠÙ…:</span>
                  <span class="detail-value">{{ formatDate(selectedApplication.job.application_deadline) }}</span>
                </div>
              }
              @if (selectedApplication.job.company) {
                <div class="detail-item">
                  <span class="detail-label">Ø§Ù„Ø´Ø±ÙƒØ©:</span>
                  <span class="detail-value">{{ selectedApplication.job.company.name }}</span>
                </div>
              }
            </div>
            @if (selectedApplication.job.description) {
              <div class="job-description">
                <h4>ÙˆØµÙ Ø§Ù„ÙˆØ¸ÙŠÙØ©</h4>
                <p>{{ selectedApplication.job.description }}</p>
              </div>
            }
            @if (selectedApplication.job.requirements) {
              <div class="job-requirements">
                <h4>Ø§Ù„Ù…ØªØ·Ù„Ø¨Ø§Øª</h4>
                <div class="requirements-content">{{ selectedApplication.job.requirements }}</div>
              </div>
            }
          </div>

          <!-- Applicant Information -->
          <div class="detail-section">
            <h3>
              <span class="section-icon">ğŸ‘¤</span>
              Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù…ØªÙ‚Ø¯Ù…
            </h3>
            <div class="detail-content">
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ“§</span>
                  Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:
                </span>
                <span class="detail-value">{{ selectedApplication.applicant?.email || 'ØºÙŠØ± Ù…ØªÙˆÙØ±' }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ“</span>
                  Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ:
                </span>
                <span class="detail-value">{{ getApplicantPhone(selectedApplication) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ“</span>
                  Ø§Ù„Ù…ÙˆÙ‚Ø¹:
                </span>
                <span class="detail-value">{{ getApplicantLocation(selectedApplication) }}</span>
              </div>
              @if (selectedApplication.applicant?.username) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">@</span>
                    Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:
                  </span>
                  <span class="detail-value">{{ selectedApplication.applicant?.username }}</span>
                </div>
              }
              @if (selectedApplication.applicant?.date_of_birth) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">ğŸ‚</span>
                    ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯:
                  </span>
                  <span class="detail-value">{{ formatDate(selectedApplication.applicant?.date_of_birth || null) }}</span>
                </div>
              }
              @if (selectedApplication.applicant?.created_at) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">ğŸ“…</span>
                    ØªØ§Ø±ÙŠØ® Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨:
                  </span>
                  <span class="detail-value">{{ formatDate(selectedApplication.applicant?.created_at || null) }}</span>
                </div>
              }
            </div>
          </div>

          <!-- Application Details -->
          <div class="detail-section">
            <h3>
              <span class="section-icon">ğŸ“‹</span>
              Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø·Ù„Ø¨
            </h3>
            <div class="detail-content">
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ“…</span>
                  ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…:
                </span>
                <span class="detail-value">{{ formatDateTime(selectedApplication.applied_at) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ”„</span>
                  Ø¢Ø®Ø± ØªØ­Ø¯ÙŠØ«:
                </span>
                <span class="detail-value">{{ formatDateTime(selectedApplication.updated_at) }}</span>
              </div>
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ·ï¸</span>
                  Ø§Ù„Ø­Ø§Ù„Ø©:
                </span>
                <span class="detail-value">
                  <span class="status-badge-enhanced" [ngClass]="getStatusClass(selectedApplication.status)">
                    {{ getStatusLabel(selectedApplication) }}
                  </span>
                </span>
              </div>
              <div class="detail-item">
                <span class="detail-label">
                  <span class="label-icon">ğŸ‘ï¸</span>
                  ØªÙ… Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©:
                </span>
                <span class="detail-value">
                  @if (selectedApplication.is_viewed) {
                    <span class="viewed-badge-enhanced">
                      <span class="badge-icon">âœ“</span>
                      <span>ØªÙ… Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                      @if (selectedApplication.viewed_at) {
                        <span class="viewed-date">({{ formatDateTime(selectedApplication.viewed_at) }})</span>
                      }
                    </span>
                  } @else {
                    <span class="not-viewed-badge-enhanced">
                      <span class="badge-icon">ğŸ‘ï¸</span>
                      <span>Ù„Ù… ÙŠØªÙ… Ø§Ù„Ù…Ø´Ø§Ù‡Ø¯Ø©</span>
                    </span>
                  }
                </span>
              </div>
              @if (selectedApplication.expected_salary) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">ğŸ’°</span>
                    Ø§Ù„Ø±Ø§ØªØ¨ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:
                  </span>
                  <span class="detail-value highlight-value">{{ selectedApplication.expected_salary | number }} Ø±ÙŠØ§Ù„</span>
                </div>
              }
              @if (selectedApplication.availability_date) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">ğŸ“†</span>
                    ØªØ§Ø±ÙŠØ® Ø§Ù„ØªÙˆÙØ±:
                  </span>
                  <span class="detail-value">{{ formatDate(selectedApplication.availability_date) }}</span>
                </div>
              }
              @if (selectedApplication.portfolio_url) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">ğŸ”—</span>
                    Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø­ÙØ¸Ø©:
                  </span>
                  <a [href]="selectedApplication.portfolio_url" target="_blank" class="detail-link-enhanced" rel="noopener noreferrer">
                    <span class="link-icon">ğŸ”—</span>
                    <span>{{ selectedApplication.portfolio_url }}</span>
                  </a>
                </div>
              }
              @if (selectedApplication.rating !== null && selectedApplication.rating !== undefined) {
                <div class="detail-item">
                  <span class="detail-label">
                    <span class="label-icon">â­</span>
                    Ø§Ù„ØªÙ‚ÙŠÙŠÙ…:
                  </span>
                  <span class="detail-value">
                    <span class="rating-stars-enhanced">
                      @for (star of [1,2,3,4,5]; track star) {
                        <span [class.filled]="star <= (selectedApplication.rating || 0)">â˜…</span>
                      }
                    </span>
                    <span class="rating-value">({{ selectedApplication.rating }}/5)</span>
                  </span>
                </div>
              }
            </div>
          </div>

          <!-- Cover Letter -->
          @if (selectedApplication.cover_letter) {
            <div class="detail-section">
              <h3>
                <span class="section-icon">âœ‰ï¸</span>
                Ø±Ø³Ø§Ù„Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠÙ…
              </h3>
              <div class="cover-letter-content">
                <p>{{ selectedApplication.cover_letter }}</p>
              </div>
            </div>
          }

          <!-- Resume -->
          @if (selectedApplication.resume) {
            <div class="detail-section">
              <h3>
                <span class="section-icon">ğŸ“„</span>
                Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
              </h3>
              <button 
                class="btn-resume-download"
                (click)="downloadResume(selectedApplication)"
                type="button">
                <span class="btn-icon">ğŸ“¥</span>
                <span>ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</span>
              </button>
            </div>
          }

          <!-- Documents -->
          <div class="detail-section">
            <h3>
              <span class="section-icon">ğŸ“</span>
              Ø§Ù„ÙˆØ«Ø§Ø¦Ù‚
            </h3>
            @if (loadingDocuments()) {
              <div class="documents-loading">
                <p-skeleton width="100%" height="80px" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="100%" height="80px" styleClass="mb-2"></p-skeleton>
                <p-skeleton width="100%" height="80px"></p-skeleton>
              </div>
            } @else if (applicantDocuments().length > 0) {
              <div class="documents-grid">
                @for (document of applicantDocuments(); track document.id) {
                  <div class="document-card-item" (click)="viewDocument(document)">
                    <div class="document-card-header">
                      <div class="document-icon-wrapper">
                        <i class="pi document-icon" 
                           [ngClass]="getDocumentIconClass(document)"></i>
                      </div>
                      <div class="document-info">
                        <h4 class="document-title">{{ document.title }}</h4>
                        <span class="document-type-badge">{{ getDocumentTypeLabel(document.document_type) }}</span>
                      </div>
                    </div>
                    @if (document.description) {
                      <p class="document-description">{{ document.description }}</p>
                    }
                    <div class="document-footer">
                      @if (document.issued_by) {
                        <span class="document-meta">
                          <i class="pi pi-building"></i>
                          {{ document.issued_by }}
                        </span>
                      }
                      @if (document.file_size) {
                        <span class="document-meta">
                          <i class="pi pi-info-circle"></i>
                          {{ document.file_size }}
                        </span>
                      }
                      <span class="document-meta">
                        <i class="pi pi-eye"></i>
                        {{ document.views_count || 0 }} Ù…Ø´Ø§Ù‡Ø¯Ø©
                      </span>
                    </div>
                    <div class="document-action-overlay">
                      <span class="view-document-btn">
                        <i class="pi pi-eye"></i>
                        Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ«ÙŠÙ‚Ø©
                      </span>
                    </div>
                  </div>
                }
              </div>
            } @else {
              <div class="documents-empty">
                <i class="pi pi-file-empty"></i>
                <p>Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ«Ø§Ø¦Ù‚ Ù…ØªØ§Ø­Ø©</p>
              </div>
            }
          </div>

          <!-- Notes -->
          @if (selectedApplication.notes) {
            <div class="detail-section">
              <h3>
                <span class="section-icon">ğŸ“</span>
                Ù…Ù„Ø§Ø­Ø¸Ø§Øª
              </h3>
              <div class="notes-content">
                <p>{{ selectedApplication.notes }}</p>
              </div>
            </div>
          }

          <!-- Employer Notes -->
          @if (selectedApplication.employer_notes) {
            <div class="detail-section">
              <h3>
                <span class="section-icon">ğŸ’¼</span>
                Ù…Ù„Ø§Ø­Ø¸Ø§Øª ØµØ§Ø­Ø¨ Ø§Ù„Ø¹Ù…Ù„
              </h3>
              <div class="notes-content">
                <p>{{ selectedApplication.employer_notes }}</p>
              </div>
            </div>
          }

          <!-- Action Buttons -->
          @if (selectedApplication.status === 'pending') {
            <div class="modal-actions-enhanced">
              <div class="action-buttons-wrapper">
                <button 
                  class="btn-action-modal btn-accept-modal"
                  [disabled]="updatingStatus.has(selectedApplication.id)"
                  (click)="updateApplicationStatus(selectedApplication.id, 'accepted'); closeDetailsModal();"
                  title="Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
                  type="button">
                  <div class="btn-content">
                    @if (updatingStatus.has(selectedApplication.id)) {
                      <span class="btn-icon-spinner">â³</span>
                      <span class="btn-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
                    } @else {
                      <span class="btn-icon-main">âœ“</span>
                      <span class="btn-text">Ù‚Ø¨ÙˆÙ„ Ø§Ù„Ø·Ù„Ø¨</span>
                    }
                  </div>
                  <div class="btn-shine"></div>
                </button>
                <button 
                  class="btn-action-modal btn-reject-modal"
                  [disabled]="updatingStatus.has(selectedApplication.id)"
                  (click)="confirmReject(selectedApplication.id)"
                  title="Ø±ÙØ¶ Ø§Ù„Ù…ØªÙ‚Ø¯Ù…"
                  type="button">
                  <div class="btn-content">
                    @if (updatingStatus.has(selectedApplication.id)) {
                      <span class="btn-icon-spinner">â³</span>
                      <span class="btn-text">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ«...</span>
                    } @else {
                      <span class="btn-icon-main">âœ•</span>
                      <span class="btn-text">Ø±ÙØ¶ Ø§Ù„Ø·Ù„Ø¨</span>
                    }
                  </div>
                  <div class="btn-shine"></div>
                </button>
              </div>
            </div>
          }
        }
      </div>
    </div>
  </div>
}

