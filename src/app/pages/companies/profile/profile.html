<div class="company-profile-page">
  <div class="company-card">
    <!-- Header -->
    <div class="company-card-header">
      <div class="company-logo-wrapper">
        <div class="company-logo-circle">
          <img
            [src]="logo$ || 'assets/images/company-placeholder.png'"
            alt="شعار الشركة"
          />
        </div>

        <button
          type="button"
          class="logo-change-btn"
          (click)="logoInput.click()"
        >
          تغيير الشعار
        </button>

        <input
          #logoInput
          type="file"
          class="logo-file-input"
          accept="image/*"
          (change)="onLogoSelected($event)"
          title="اختر شعار الشركة"
          aria-label="اختر شعار الشركة"
        />
      </div>

      <div class="company-header-text">
        <h1 class="company-title">تحديث بيانات الشركة</h1>
        <p class="company-subtitle">
          حدّث الملف التعريفي لصاحب العمل ليظهر بشكل احترافي في منصة التوظيف.
        </p>
      </div>
    </div>

    <div class="company-divider"></div>

    <!-- Form -->
    <form class="company-form" (ngSubmit)="save()">
      <div class="form-grid">
        <!-- Company name -->
        <div class="form-group">
          <label class="form-label" for="company_name">اسم الشركة</label>
          <input
            pInputText
            id="company_name"
            required
            [(ngModel)]="form.company_name"
            name="company_name"
            placeholder="مثال: Data Trans"
            #companyNameCtrl="ngModel"
            [class.p-invalid]="companyNameCtrl.invalid && (companyNameCtrl.dirty || companyNameCtrl.touched)"
          />
          <small
            class="p-error"
            *ngIf="companyNameCtrl.errors?.['required'] && (companyNameCtrl.dirty || companyNameCtrl.touched)"
          >
            اسم الشركة مطلوب
          </small>
        </div>

        <!-- Website -->
        <div class="form-group">
          <label class="form-label" for="company_website">موقع الشركة</label>
          <input
            pInputText
            type="url"
            id="company_website"
            [(ngModel)]="form.company_website"
            name="company_website"
            placeholder="https://example.com"
            #websiteCtrl="ngModel"
            [class.p-invalid]="websiteCtrl.invalid && (websiteCtrl.dirty || websiteCtrl.touched)"
          />
          <small
            class="p-error"
            *ngIf="websiteCtrl.errors?.['url'] && (websiteCtrl.dirty || websiteCtrl.touched)"
          >
            رابط غير صالح
          </small>
        </div>

        <!-- Founded year -->
        <div class="form-group">
          <label class="form-label" for="founded_year">سنة التأسيس</label>
          <input
            pInputText
            type="number"
            id="founded_year"
            min="1900"
            max="2100"
            [(ngModel)]="form.founded_year"
            name="founded_year"
            placeholder="2015"
          />
        </div>

        <!-- Size -->
        <div class="form-group">
          <label class="form-label" for="company_size">حجم الشركة</label>
          <p-select
            inputId="company_size"
            appendTo="body"
            name="company_size"
            [options]="COMPANY_SIZES"
            optionLabel="label"
            optionValue="value"
            placeholder="اختر الحجم"
            [showClear]="true"
            [checkmark]="true"
            class="select-full"
            [(ngModel)]="form.company_size"
            required
            #companySizeCtrl="ngModel"
            [class.p-invalid]="companySizeCtrl.invalid && (companySizeCtrl.dirty || companySizeCtrl.touched)"
          >
          </p-select>
          <small
            class="p-error"
            *ngIf="companySizeCtrl.invalid && (companySizeCtrl.dirty || companySizeCtrl.touched)"
          >
            يرجى اختيار حجم الشركة.
          </small>
        </div>

        <!-- Industry -->
        <div class="form-group">
          <label class="form-label" for="industry">الصناعة</label>
          <input
            pInputText
            id="industry"
            [(ngModel)]="form.industry"
            name="industry"
            placeholder="تقنية المعلومات، تجارة، تعليم..."
          />
        </div>

        <!-- Description -->
        <div class="form-group form-group-full">
          <label class="form-label" for="company_description">وصف الشركة</label>
          <textarea
            pTextarea
            id="company_description"
            rows="4"
            [(ngModel)]="form.company_description"
            name="company_description"
            placeholder="نبذة مختصرة عن نشاط الشركة والخدمات التي تقدمها"
          ></textarea>
        </div>

        <!-- Logo note -->
        <div class="form-group form-group-full">
          <label class="form-label">الشعار</label>
          <p class="help-text">
            يمكن تغيير الشعار من زر &quot;تغيير الشعار&quot; في الأعلى. يفضّل
            رفع صورة مربعة (PNG أو JPG).
          </p>
        </div>
      </div>

      <div class="form-actions">
        <p-button
          type="submit"
          [label]="saving ? 'جارٍ حفظ التغييرات...' : 'حفظ التغييرات'"
          [disabled]="saving"
          [loading]="saving"
          styleClass="p-button-primary"
        ></p-button>
      </div>
    </form>
  </div>
</div>
