<!-- Dashboard Container -->
<div id="overview" class="tab-content active">
  <!-- Header Skeleton -->
  @if (stats === null) {
  <div class="dashboard-header">
    <p-skeleton width="300px" height="2.5rem" styleClass="mb-2"></p-skeleton>
    <div class="dashboard-actions">
      <p-skeleton width="150px" height="2.5rem" styleClass="mb-0"></p-skeleton>
      <p-skeleton width="180px" height="2.5rem" styleClass="mb-0"></p-skeleton>
    </div>
  </div>
  }

  <!-- Actual Header -->
  @if (stats !== null) {
  <div class="dashboard-header">
    <h1 class="dashboard-title">Ù…Ø±Ø­Ø¨Ø§Ù‹ØŒ {{ userData.user.first_name || 'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…' }}!</h1>
    <div class="dashboard-actions">
      <a routerLink="/jobs" class="btn btn-primary">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù</a>
      <a routerLink="/jobseeker/cv-builder" class="btn btn-secondary"
        >ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</a
      >
    </div>
  </div>
  }

  <!-- Stats Grid Skeleton -->
  @if (stats === null) {
  <div class="stats-grid">
    @for (item of [1,2,3,4]; track item) {
    <div class="stat-card">
      <div class="stat-header">
        <p-skeleton width="120px" height="1rem" styleClass="mb-0"></p-skeleton>
        <p-skeleton width="24px" height="24px" styleClass="mb-0"></p-skeleton>
      </div>
      <p-skeleton width="60px" height="2rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="100px" height="1rem" styleClass="mb-0"></p-skeleton>
    </div>
    }
  </div>
  }

  <!-- Stats Grid -->
  @if (stats !== null) {
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-header">
        <span class="stat-title">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù</span>
        <span class="stat-icon">ğŸ“</span>
      </div>
      <div class="stat-value">{{ stats.total_jobs || 0 }}</div>
      <div class="stat-change">Ù…ØªØ§Ø­Ø© Ø§Ù„Ø¢Ù†</div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <span class="stat-title">ÙˆØ¸Ø§Ø¦Ù Ù…Ù…ÙŠØ²Ø©</span>
        <span class="stat-icon">â­</span>
      </div>
      <div class="stat-value">{{ stats.featured_jobs || 0 }}</div>
      <div class="stat-change">Ù…Ù…ÙŠØ²Ø©</div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <span class="stat-title">ÙˆØ¸Ø§Ø¦Ù Ø¹Ø§Ø¬Ù„Ø©</span>
        <span class="stat-icon">ğŸ—“ï¸</span>
      </div>
      <div class="stat-value">{{ stats.urgent_jobs || 0 }}</div>
      <div class="stat-change">Ø¹Ø§Ø¬Ù„Ø©</div>
    </div>

    <div class="stat-card">
      <div class="stat-header">
        <span class="stat-title">Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</span>
        <span class="stat-icon">ğŸ’¾</span>
      </div>
      <div class="stat-value">{{ stats.saved_jobs_count || savedJobs.length }}</div>
      <div class="stat-change">+{{ stats.daily_saved || 0 }} Ø§Ù„ÙŠÙˆÙ…</div>
    </div>
  </div>
  }

  <!-- Quick Actions Skeleton -->
  @if (stats === null) {
  <div class="quick-actions">
    @for (item of [1,2,3,4]; track item) {
    <div class="quick-action-card skeleton-quick-action">
      <p-skeleton width="48px" height="48px" shape="circle" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="150px" height="1.3rem" styleClass="mb-2"></p-skeleton>
      <p-skeleton width="200px" height="1rem" styleClass="mb-0"></p-skeleton>
    </div>
    }
  </div>
  }

  <!-- Quick Actions -->
  @if (stats !== null) {
  <div class="quick-actions">
    <a routerLink="/jobs" class="quick-action-card">
      <div class="quick-action-icon">ğŸ”</div>
      <h3 class="quick-action-title">Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù</h3>
      <p class="quick-action-desc">Ø§ÙƒØªØ´Ù Ø¢Ù„Ø§Ù Ø§Ù„ÙØ±Øµ Ø§Ù„ÙˆØ¸ÙŠÙÙŠØ©</p>
    </a>

    <a routerLink="/jobseeker/cv-builder" class="quick-action-card">
      <div class="quick-action-icon">ğŸ“„</div>
      <h3 class="quick-action-title">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</h3>
      <p class="quick-action-desc">Ø£Ù†Ø´Ø¦ Ø³ÙŠØ±Ø© Ø°Ø§ØªÙŠØ© Ø§Ø­ØªØ±Ø§ÙÙŠØ©</p>
    </a>

    <a routerLink="/companies-list" class="quick-action-card">
      <div class="quick-action-icon">ğŸ¢</div>
      <h3 class="quick-action-title">ØªØµÙØ­ Ø§Ù„Ø´Ø±ÙƒØ§Øª</h3>
      <p class="quick-action-desc">Ø§ÙƒØªØ´Ù Ø£ÙØ¶Ù„ Ø£Ù…Ø§ÙƒÙ† Ø§Ù„Ø¹Ù…Ù„</p>
    </a>

    <a href="salaries.html" class="quick-action-card">
      <div class="quick-action-icon">ğŸ’°</div>
      <h3 class="quick-action-title">Ø¯Ù„ÙŠÙ„ Ø§Ù„Ø±ÙˆØ§ØªØ¨</h3>
      <p class="quick-action-desc">ØªØ¹Ø±Ù Ø¹Ù„Ù‰ Ù…ØªÙˆØ³Ø· Ø§Ù„Ø±ÙˆØ§ØªØ¨</p>
    </a>
  </div>
  }

  <!-- Content Grid -->
  <div class="content-grid">
    <!-- Recent Applications Skeleton -->
    @if (stats === null) {
    <div class="content-card">
      <div class="card-header">
        <p-skeleton width="150px" height="1.5rem" styleClass="mb-0"></p-skeleton>
        <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
      </div>
      @for (item of [1,2,3]; track item) {
      <div class="application-item skeleton-application-item">
        <p-skeleton width="50px" height="50px" shape="circle" styleClass="skeleton-logo"></p-skeleton>
        <div class="application-info">
          <p-skeleton width="200px" height="1.3rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="150px" height="1rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="180px" height="0.9rem" styleClass="mb-0"></p-skeleton>
        </div>
        <p-skeleton width="100px" height="1.5rem" styleClass="mb-0"></p-skeleton>
      </div>
      }
    </div>
    }

    <!-- Recent Applications -->
    @if (stats !== null) {
    <div class="content-card">
      <div class="card-header">
        <h2 class="card-title">Ø¢Ø®Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª</h2>
        <a
          href="#applications"
          class="card-action"
          onclick="switchTab('applications')"
          >Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a
        >
      </div>

      <div class="application-item" *ngFor="let app of recentApplications">
        <img
          [src]="app.job.company.logo || 'images/company-logo-1.jpg'"
          [alt]="app.job.company.name"
          [title]="app.job.company.name"
          title="Company logo"
          class="application-logo"
        />
        <div class="application-info">
          <h4 class="application-title">
            <a 
              [routerLink]="['/jobseeker/job-details', app.job.slug]"
              class="application-title-link"
              (click)="$event.stopPropagation()"
            >
              {{ app.job.title }}
            </a>
          </h4>
          <a 
            [routerLink]="['/company', app.job.company.slug]"
            class="application-company"
            (click)="$event.stopPropagation()"
          >
            {{ app.job.company.name }}
          </a>
          <div class="application-meta">
            <span>ØªÙ‚Ø¯Ù…Øª {{ app.applied_at | date:'short' }}</span>
            <span *ngIf="app.job.city">{{ app.job.city }}</span>
          </div>
        </div>
        <span class="application-status" 
              [ngClass]="{
                'status-pending': app.status === 'pending',
                'status-reviewed': app.status === 'reviewed',
                'status-accepted': app.status === 'accepted',
                'status-rejected': app.status === 'rejected'
              }">
          {{ app.status === 'pending' ? 'Ù‚ÙŠØ¯ Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' : 
             app.status === 'reviewed' ? 'ØªÙ…Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©' :
             app.status === 'accepted' ? 'Ù…Ù‚Ø¨ÙˆÙ„' : 'Ù…Ø±ÙÙˆØ¶' }}
        </span>
      </div>

      <p *ngIf="recentApplications.length === 0">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø·Ù„Ø¨Ø§Øª Ø­Ø§Ù„ÙŠØ§Ù‹</p>
    </div>
    }

    <!-- Saved Jobs Skeleton -->
    @if (stats === null) {
    <div class="content-card">
      <div class="card-header">
        <p-skeleton width="150px" height="1.5rem" styleClass="mb-0"></p-skeleton>
        <p-skeleton width="80px" height="1rem" styleClass="mb-0"></p-skeleton>
      </div>
      @for (item of [1,2]; track item) {
      <div class="saved-job-item skeleton-saved-job-item">
        <p-skeleton width="50px" height="50px" shape="circle" styleClass="skeleton-logo"></p-skeleton>
        <div class="saved-job-info">
          <p-skeleton width="200px" height="1.3rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="150px" height="1rem" styleClass="mb-2"></p-skeleton>
          <p-skeleton width="180px" height="0.9rem" styleClass="mb-0"></p-skeleton>
        </div>
      </div>
      }
    </div>
    }

    <!-- Saved Jobs -->
    @if (stats !== null) {
    <div class="content-card">
      <div class="card-header">
        <h2 class="card-title">Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©</h2>
        <a
          href="#saved-jobs"
          class="card-action"
          onclick="switchTab('saved-jobs')"
          >Ø¹Ø±Ø¶ Ø§Ù„ÙƒÙ„</a
        >
      </div>

      <div class="saved-job-item" *ngFor="let job of savedJobs">
        <img
          [src]="job.company.logo || 'images/company-logo-1.jpg'"
          [alt]="job.company.name"
          [title]="job.company.name"
          title="Company logo"
          class="saved-job-logo"
        />
        <div class="saved-job-info">
          <h4 class="saved-job-title">
            <a 
              [routerLink]="['/jobseeker/job-details', job.slug]"
              class="saved-job-title-link"
              (click)="$event.stopPropagation()"
            >
              {{ job.title }}
            </a>
          </h4>
          <a 
            [routerLink]="getCompanyRoute(job.company)"
            class="saved-job-company"
            (click)="$event.stopPropagation()"
          >
            {{ job.company.name }}
          </a>
          <p class="saved-job-meta">
            <span *ngIf="job.salary_min && job.salary_max">
              {{ job.salary_min }}-{{ job.salary_max }} Ø±ÙŠØ§Ù„
            </span>
            <span *ngIf="!job.salary_min && !job.salary_max">Ø§Ù„Ø±Ø§ØªØ¨ ØºÙŠØ± Ù…Ø­Ø¯Ø¯</span>
            <span *ngIf="job.city"> â€¢ {{ job.city }}</span>
          </p>
        </div>
      </div>

      <p *ngIf="savedJobs.length === 0">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…Ø­ÙÙˆØ¸Ø©</p>
    </div>
    }
  </div>
</div>
