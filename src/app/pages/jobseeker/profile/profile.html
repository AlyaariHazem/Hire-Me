<form [formGroup]="basicForm" class="form-section">
  <h3 class="section-title"><span>๐ค</span>ุงููุนูููุงุช ุงูุดุฎุตูุฉ</h3>
  <!-- ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ -->
  <div class="resume-wrap">
    @if(resumeUrl){

    <div class="resume-bar">
      <div class="resume-meta">
        <span class="resume-icon">๐</span>
        <div>
          <div class="resume-name">{{ resumeDisplayName }}</div>
          <div class="resume-type">{{ isPdf ? 'PDF' : 'Document' }}</div>
        </div>
      </div>

      <div class="resume-actions">
        <label class="btn btn-light m-0">
          ุชุบููุฑ ุงูููู
          <input
            type="file"
            class="d-none"
            accept=".pdf,.doc,.docx"
            (change)="onResumeChange($event)"
          />
        </label>

        <button
          type="button"
          class="btn btn-secondary"
          (click)="showPreview = !showPreview"
        >
          {{ showPreview ? 'ุฅุฎูุงุก ุงููุนุงููุฉ' : 'ูุนุงููุฉ' }}
        </button>

        <a
          class="btn btn-primary"
          [href]="resumeUrl"
          target="_blank"
          rel="noopener"
          download
        >
          ุชูุฒูู
        </a>
      </div>
    </div>
    }@else {
    <ng-container>
      <div class="resume-empty">
        ูุง ุชูุฌุฏ ุณูุฑุฉ ุฐุงุชูุฉ ูุฑููุนุฉ
        <label class="btn btn-primary ml-2">
          ุฑูุน ููู
          <input
            type="file"
            class="d-none"
            accept=".pdf,.doc,.docx"
            (change)="onResumeChange($event)"
          />
        </label>
      </div>
    </ng-container>
    }

    <!-- ูุนุงููุฉ PDF ููุท -->
    <div class="resume-preview" *ngIf="isPdf && resumeSafeUrl">
      <iframe [src]="resumeSafeUrl"></iframe>
    </div>
    <div class="resume-note" *ngIf="!isPdf && resumeUrl">
      ูุง ูููู ุนุฑุถ ุงูููู ุฏุงุฎู ุงูุตูุญุฉ ุจุณุจุจ ุฅุนุฏุงุฏุงุช ุงูุฎุงุฏู. ุงุณุชุฎุฏู ุฒุฑ ยซุชูุฒููยป.
    </div>
  </div>

  <!-- ุงููุนูููุงุช ุงูุดุฎุตูุฉ -->
  <section class="form-card" dir="rtl">
    <h3 class="form-card__title">๐ค ุงููุนูููุงุช ุงูุดุฎุตูุฉ</h3>

    <div class="form-grid">
      <label class="field">
        <span class="field__label">ุงูุงุณู ุงูุฃูู</span>
        <input class="field__control" formControlName="first_name" />
      </label>

      <label class="field">
        <span class="field__label">ุงูุงุณู ุงูุฃุฎูุฑ</span>
        <input class="field__control" formControlName="last_name" />
      </label>

      <label class="field">
        <span class="field__label">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</span>
        <input type="email" class="field__control" formControlName="email" />
      </label>

      <label class="field">
        <span class="field__label">ุฑูู ุงููุงุชู</span>
        <input class="field__control" formControlName="phone" />
      </label>

      <label class="field">
        <span class="field__label">ุชุงุฑูุฎ ุงููููุงุฏ</span>
        <input
          type="date"
          class="field__control"
          formControlName="date_of_birth"
        />
      </label>

      <label class="field">
        <span class="field__label">ุงูุนููุงู</span>
        <input class="field__control" formControlName="location" />
      </label>

      <label class="field field--full">
        <span class="field__label">ูุจุฐุฉ ูุฎุชุตุฑุฉ</span>
        <textarea
          rows="4"
          class="field__control"
          formControlName="bio"
        ></textarea>
      </label>
    </div>
  </section>

  <!-- ุงููุนูููุงุช ุงูููููุฉ -->
  <section class="form-card" dir="rtl" [formGroup]="jobForm">
    <h3 class="form-card__title">๐ผ ุงููุนูููุงุช ุงูููููุฉ</h3>

    <div class="form-grid">
      <label class="field">
        <span class="field__label">ุณููุงุช ุงูุฎุจุฑุฉ</span>
        <select class="field__control" formControlName="experience_level">
          <option value="entry">ูุจุชุฏุฆ</option>
          <option value="mid">ูุชูุณุท</option>
          <option value="senior">ูุชูุฏู</option>
          <option value="lead">ุฎุจูุฑ</option>
        </select>
      </label>

      <label class="field">
        <span class="field__label">ุงููุณุชูู ุงูุชุนูููู</span>
        <select class="field__control" formControlName="education_level">
          <option value="high_school">ุซุงูููุฉ ุนุงูุฉ</option>
          <option value="diploma">ุฏุจููู</option>
          <option value="bachelor">ุจูุงููุฑููุณ</option>
          <option value="master">ูุงุฌุณุชูุฑ</option>
          <option value="phd">ุฏูุชูุฑุงู</option>
        </select>
      </label>

      <label class="field">
        <span class="field__label">ุงูุฑุงุชุจ ุงูุฃุฏูู</span>
        <input
          type="number"
          class="field__control"
          formControlName="expected_salary_min"
        />
      </label>

      <label class="field">
        <span class="field__label">ุงูุฑุงุชุจ ุงูุฃุนูู</span>
        <input
          type="number"
          class="field__control"
          formControlName="expected_salary_max"
        />
      </label>

      <label class="field">
        <span class="field__label">ููุน ุงูุนูู ุงูููุถู</span>
        <select class="field__control" formControlName="preferred_job_type">
          <option value="full_time">ุฏูุงู ูุงูู</option>
          <option value="part_time">ุฏูุงู ุฌุฒุฆู</option>
          <option value="contract">ุนูุฏ ูุคูุช</option>
          <option value="freelance">ุนูู ุญุฑ</option>
          <option value="remote">ุนู ุจูุนุฏ</option>
        </select>
      </label>

      <label class="field">
        <span class="field__label">ูุชุงุญ ููุนูู</span>
        <select class="field__control" formControlName="availability">
          <option [value]="true">ูุนู</option>
          <option [value]="false">ูุง</option>
        </select>
      </label>

      <label class="field">
        <span class="field__label">ุงูููุงุฑุงุช (ุงูุตู ุจููุงุตู)</span>
        <input
          class="field__control"
          formControlName="skills"
          placeholder="JS, React, Node"
        />
      </label>

      <label class="field">
        <span class="field__label">ุงููุบุงุช (ุงูุตู ุจููุงุตู)</span>
        <input
          class="field__control"
          formControlName="languages"
          placeholder="Arabic, English"
        />
      </label>
    </div>
  </section>

  <div class="form-actions">
    <button
      type="button"
      class="btn btn-secondary"
      (click)="basicForm.reset(); jobForm.reset();"
    >
      ุฅูุบุงุก
    </button>
    <button type="button" class="btn btn-primary" (click)="saveChanges()">
      ุญูุธ ุงูุชุบููุฑุงุช
    </button>
  </div>
</form>
