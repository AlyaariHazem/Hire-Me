<aside class="dashboard-sidebar">
  <!-- Profile Skeleton -->
  @if (profile === null) {
  <div class="sidebar-profile">
    <div class="skeleton-avatar-container">
      <p-skeleton width="120px" height="120px" shape="circle" styleClass="skeleton-avatar"></p-skeleton>
      <p-skeleton width="100px" height="1.5rem" styleClass="skeleton-edit-badge"></p-skeleton>
    </div>
    <p-skeleton width="150px" height="1.5rem" styleClass="mb-2"></p-skeleton>
    <p-skeleton width="120px" height="1rem" styleClass="mb-3"></p-skeleton>
    <p-skeleton width="100%" height="0.5rem" styleClass="mb-2"></p-skeleton>
    <p-skeleton width="80px" height="1rem" styleClass="mb-3"></p-skeleton>
    <p-skeleton width="100%" height="2.5rem" styleClass="mb-0"></p-skeleton>
  </div>
  }

  <!-- Actual Profile -->
  @if (profile !== null) {
  <div class="sidebar-profile">
    <label class="avatar-uploader">
  <img
    [src]="
      previewUrl ||
      toAbsolute(profile.user.profile_picture || profile.user.profile_picture) ||
      'images/candidate-3.jpg'
    "
    class="profile-avatar"
    [alt]="jobSeekerName || 'صورة الملف الشخصي'"
    [title]="jobSeekerName || 'صورة الملف الشخصي'"
    title="صورة الملف الشخصي"
  />
  <input type="file" accept="image/*" (change)="onAvatarChange($event)" />
  <span class="edit-badge">تغيير الصورة</span>
</label>

    <h3 class="profile-name">
  {{ jobSeekerName || 'اسم المستخدم' }}
</h3>
    <p class="profile-title">{{ jobSeekerTitle || 'لا يوجد عنوان وظيفي' }}</p>

    <div class="avatar-actions" *ngIf="selectedFile">
      <button
        class="btn btn-primary"
        (click)="saveAvatar()"
        [disabled]="saving"
      >
        حفظ الصورة
      </button>
      <button
        class="btn btn-secondary"
        (click)="cancelAvatar()"
        [disabled]="saving"
      >
        إلغاء
      </button>
    </div>
    <div class="profile-completion">
      <div class="profile-progress"></div>
      <p class="profile-progress-text">75% مكتمل</p>
    </div>

    <a
      routerLink="/jobseeker/profile"
      class="btn btn-small btn-primary employer-nav-link btn-full-width"
    >
      تحديث الملف الشخصي
    </a>
  </div>
  }

  <!-- Navigation Skeleton -->
  @if (profile === null) {
  <nav>
    <ul class="sidebar-nav">
      @for (item of [1,2,3,4,5,6,7,8]; track item) {
      <li class="sidebar-nav-item">
        <div class="sidebar-nav-link skeleton-nav-link">
          <p-skeleton width="24px" height="24px" shape="circle" styleClass="skeleton-nav-icon"></p-skeleton>
          <p-skeleton width="120px" height="1rem" styleClass="skeleton-nav-text"></p-skeleton>
        </div>
      </li>
      }
    </ul>
  </nav>
  }

  <!-- Actual Navigation -->
  @if (profile !== null) {
  <nav>
    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/dashboard"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="overview"
        >
          <i class="pi pi-chart-bar nav-icon"></i>
          نظرة عامة
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/applications"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="applications"
        >
          <i class="pi pi-file-edit nav-icon"></i>
          طلباتي
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/interviews"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="interviews"
        >
          <i class="pi pi-calendar nav-icon"></i>
          المقابلات
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/saved-jobs"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="saved-jobs"
        >
          <i class="pi pi-bookmark nav-icon"></i>
          الوظائف المحفوظة
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/profile"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="profile"
        >
          <i class="pi pi-user nav-icon"></i>
          الملف الشخصي
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/messages"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          data-tab="messages"
        >
          <i class="pi pi-comments nav-icon"></i>
          الرسائل
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/cv"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          routerLinkActive="active"
          data-tab="cv"
        >
          <i class="pi pi-file nav-icon"></i>
          السيرة الذاتية
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/alerts"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          routerLinkActive="active"
          data-tab="alerts"
        >
          <i class="pi pi-bell nav-icon"></i>
          تنبيهات الوظائف
        </a>
      </li>
      <li class="sidebar-nav-item">
        <a
          routerLink="/jobseeker/settings"
          routerLinkActive="active"
          class="sidebar-nav-link employer-nav-link "
          routerLinkActive="active"
          data-tab="settings"
        >
          <i class="pi pi-cog nav-icon"></i>
          الإعدادات
        </a>
      </li>
    </ul>
  </nav>
  }
</aside>
