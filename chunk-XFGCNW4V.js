import{N as g}from"./chunk-Z2YEEACR.js";import{P as u,T as d}from"./chunk-CS4YKCHA.js";var h=class m{constructor(o){this.toastr=o}fieldLabel={email:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",password:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",password_confirm:"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",first_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644",last_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062E\u064A\u0631",phone:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",username:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"};error(o,t={}){let{join:a=!1,maxToasts:i=6,title:f="\u062D\u062F\u062B\u062A \u0623\u062E\u0637\u0627\u0621"}=t;if(o?.status===0){this.toastr.error("\u062A\u0639\u0630\u0651\u0631 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u062E\u0627\u062F\u0645. \u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u062A\u0635\u0627\u0644 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u062B\u0645 \u0623\u0639\u062F \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629.");return}let n=this.extractMessages(o);if(n.length===0){this.toastr.error("\u0641\u0634\u0644 \u0627\u0644\u0637\u0644\u0628. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u064B\u0627.");return}if(this.toastr.clear(),a)this.toastr.error(n.join("<br/>"),f,{enableHtml:!0,timeOut:9e3,closeButton:!0,progressBar:!0});else{n.slice(0,i).forEach(r=>this.toastr.error(r));let c=n.length-i;c>0&&this.toastr.error(`\u0648${c} \u0631\u0633\u0627\u0644\u0629 \u0623\u062E\u0631\u0649\u2026`)}}extractMessages(o){let t=o?.error?.data??o?.error?.errors??o?.error??o,a={},i=(r,e)=>{if(e==null)return;(Array.isArray(e)?e:[e]).forEach(p=>{let l=String(p??"").trim();l&&(a[r]||=[]).push(l)})},f=r=>{for(let e of Object.keys(r)){let s=r[e];["detail","message","non_field_errors","_error"].includes(e)?i("_error",s):s&&typeof s=="object"&&!Array.isArray(s)?f(s):i(e,s)}};typeof t=="string"?i("_error",t):Array.isArray(t)?t.forEach(r=>i("_error",r)):t&&typeof t=="object"?f(t):i("_error","\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639.");let n={password2:"password_confirm",confirm_password:"password_confirm",username:"email"};for(let[r,e]of Object.entries(n))a[r]&&(a[e]=(a[e]||[]).concat(a[r]),delete a[r]);let c=[];for(let[r,e]of Object.entries(a)){let s=Array.from(new Set(e));if(r==="_error")c.push(...s);else{let p=this.fieldLabel[r]??r;s.forEach(l=>c.push(`${p}: ${l}`))}}return Array.from(new Set(c))}static \u0275fac=function(t){return new(t||m)(d(g))};static \u0275prov=u({token:m,factory:m.\u0275fac,providedIn:"root"})};export{h as a};
