import{Ka as S,O as d,Q as c}from"./chunk-HZGGMTPS.js";import{o as m,p as O}from"./chunk-7IBYSJKF.js";import{Q as g,U as b,V as _,Wb as w,Za as A,yb as j,zb as v}from"./chunk-L43F6PFV.js";var h=class a{constructor(t){this.toastr=t}fieldLabel={email:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",password:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",password_confirm:"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",first_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644",last_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062E\u064A\u0631",phone:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",username:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"};error(t,e={}){let{join:r=!1,maxToasts:i=6,title:n="\u062D\u062F\u062B\u062A \u0623\u062E\u0637\u0627\u0621"}=e;if(t?.status===0){this.toastr.error("\u062A\u0639\u0630\u0651\u0631 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u062E\u0627\u062F\u0645. \u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u062A\u0635\u0627\u0644 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u062B\u0645 \u0623\u0639\u062F \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629.");return}let l=this.extractMessages(t);if(l.length===0){this.toastr.error("\u0641\u0634\u0644 \u0627\u0644\u0637\u0644\u0628. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u064B\u0627.");return}if(this.toastr.clear(),r)this.toastr.error(l.join("<br/>"),n,{enableHtml:!0,timeOut:9e3,closeButton:!0,progressBar:!0});else{l.slice(0,i).forEach(s=>this.toastr.error(s));let u=l.length-i;u>0&&this.toastr.error(`\u0648${u} \u0631\u0633\u0627\u0644\u0629 \u0623\u062E\u0631\u0649\u2026`)}}extractMessages(t){let e=t?.error?.data??t?.error?.errors??t?.error??t,r={},i=(s,o)=>{if(o==null)return;(Array.isArray(o)?o:[o]).forEach(y=>{let f=String(y??"").trim();f&&(r[s]||=[]).push(f)})},n=s=>{for(let o of Object.keys(s)){let p=s[o];["detail","message","non_field_errors","_error"].includes(o)?i("_error",p):p&&typeof p=="object"&&!Array.isArray(p)?n(p):i(o,p)}};typeof e=="string"?i("_error",e):Array.isArray(e)?e.forEach(s=>i("_error",s)):e&&typeof e=="object"?n(e):i("_error","\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639.");let l={password2:"password_confirm",confirm_password:"password_confirm",username:"email"};for(let[s,o]of Object.entries(l))r[s]&&(r[o]=(r[o]||[]).concat(r[s]),delete r[s]);let u=[];for(let[s,o]of Object.entries(r)){let p=Array.from(new Set(o));if(s==="_error")u.push(...p);else{let y=this.fieldLabel[s]??s;p.forEach(f=>u.push(`${y}: ${f}`))}}return Array.from(new Set(u))}static \u0275fac=function(e){return new(e||a)(b(d))};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};var E=class a{toastr=_(d);errors=_(h);static \u0275fac=function(e){return new(e||a)};static \u0275cmp=A({type:a,selectors:[["app-base"]],decls:2,vars:0,template:function(e,r){e&1&&(j(0,"p"),w(1,"base works!"),v())},dependencies:[S],encapsulation:2})};var R=class a{constructor(t){this.http=t}getApplications(t){let e=c.getUrl("","applications"),r=new m;return t&&Object.entries(t).forEach(([i,n])=>{n!=null&&(r=r.set(i,String(n)))}),this.http.get(e,{params:r})}getJobApplications(t,e){let r=c.getUrl("job-applications","applications"),i=new m;return i=i.set("job",String(t)),e&&Object.entries(e).forEach(([n,l])=>{l!=null&&(i=i.set(n,String(l)))}),this.http.get(r,{params:i})}getAllJobApplications(t){let e=c.getUrl("job-applications","applications"),r=new m;return t&&Object.entries(t).forEach(([i,n])=>{n!=null&&(r=r.set(i,String(n)))}),this.http.get(e,{params:r})}getMyApplications(t){let e=c.getUrl("my-applications","applications"),r=new m;return t&&Object.entries(t).forEach(([i,n])=>{n!=null&&(r=r.set(i,String(n)))}),this.http.get(e,{params:r})}applyToJob(t){let e=c.getUrl("apply","applications");return this.http.post(e,{job:t})}applyToJobWithData(t){let e=c.getUrl("apply","applications");return this.http.post(e,t)}getApplicationStatistics(){let t=c.getUrl("statistics","applications");return this.http.get(t)}getApplicationById(t){let e=c.getUrl(`${t}`,"applications");return this.http.get(e)}updateApplicationStatus(t,e){let r=c.getUrl(`${t}`,"applications")+"update/";return this.http.patch(r,{status:e})}static \u0275fac=function(e){return new(e||a)(b(O))};static \u0275prov=g({token:a,factory:a.\u0275fac,providedIn:"root"})};export{h as a,E as b,R as c};
