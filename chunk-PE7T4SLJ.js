import{La as x,N as c,O as g}from"./chunk-JFXOJRAQ.js";import{p as D}from"./chunk-GLCHDZZZ.js";import{P as u,T as d,U as b,Ub as w,Ya as v,q as C,wb as I,xb as j}from"./chunk-I2MBLAUA.js";var y=class s{constructor(t){this.toastr=t}fieldLabel={email:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A",password:"\u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",password_confirm:"\u062A\u0623\u0643\u064A\u062F \u0643\u0644\u0645\u0629 \u0627\u0644\u0645\u0631\u0648\u0631",first_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u0648\u0644",last_name:"\u0627\u0644\u0627\u0633\u0645 \u0627\u0644\u0623\u062E\u064A\u0631",phone:"\u0631\u0642\u0645 \u0627\u0644\u0647\u0627\u062A\u0641",username:"\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"};error(t,r={}){let{join:a=!1,maxToasts:i=6,title:l="\u062D\u062F\u062B\u062A \u0623\u062E\u0637\u0627\u0621"}=r;if(t?.status===0){this.toastr.error("\u062A\u0639\u0630\u0651\u0631 \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0627\u0644\u062E\u0627\u062F\u0645. \u062A\u0623\u0643\u062F \u0645\u0646 \u0627\u062A\u0635\u0627\u0644 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u062B\u0645 \u0623\u0639\u062F \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629.");return}let p=this.extractMessages(t);if(p.length===0){this.toastr.error("\u0641\u0634\u0644 \u0627\u0644\u0637\u0644\u0628. \u064A\u0631\u062C\u0649 \u0627\u0644\u0645\u062D\u0627\u0648\u0644\u0629 \u0644\u0627\u062D\u0642\u064B\u0627.");return}if(this.toastr.clear(),a)this.toastr.error(p.join("<br/>"),l,{enableHtml:!0,timeOut:9e3,closeButton:!0,progressBar:!0});else{p.slice(0,i).forEach(e=>this.toastr.error(e));let m=p.length-i;m>0&&this.toastr.error(`\u0648${m} \u0631\u0633\u0627\u0644\u0629 \u0623\u062E\u0631\u0649\u2026`)}}extractMessages(t){let r=t?.error?.data??t?.error?.errors??t?.error??t,a={},i=(e,o)=>{if(o==null)return;(Array.isArray(o)?o:[o]).forEach(h=>{let f=String(h??"").trim();f&&(a[e]||=[]).push(f)})},l=e=>{for(let o of Object.keys(e)){let n=e[o];["detail","message","non_field_errors","_error"].includes(o)?i("_error",n):n&&typeof n=="object"&&!Array.isArray(n)?l(n):i(o,n)}};typeof r=="string"?i("_error",r):Array.isArray(r)?r.forEach(e=>i("_error",e)):r&&typeof r=="object"?l(r):i("_error","\u062D\u062F\u062B \u062E\u0637\u0623 \u063A\u064A\u0631 \u0645\u062A\u0648\u0642\u0639.");let p={password2:"password_confirm",confirm_password:"password_confirm",username:"email"};for(let[e,o]of Object.entries(p))a[e]&&(a[o]=(a[o]||[]).concat(a[e]),delete a[e]);let m=[];for(let[e,o]of Object.entries(a)){let n=Array.from(new Set(o));if(e==="_error")m.push(...n);else{let h=this.fieldLabel[e]??e;n.forEach(f=>m.push(`${h}: ${f}`))}}return Array.from(new Set(m))}static \u0275fac=function(r){return new(r||s)(d(g))};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var _=class s{toastr=b(g);errors=b(y);static \u0275fac=function(r){return new(r||s)};static \u0275cmp=v({type:s,selectors:[["app-base"]],decls:2,vars:0,template:function(r,a){r&1&&(I(0,"p"),w(1,"base works!"),j())},dependencies:[x],encapsulation:2})};var A=class s{constructor(t){this.http=t}createCompany(t){return this.http.post(c.getUrl("create","companies"),t)}getMyCompanies(){return this.http.get(c.getUrl("my-companies","companies")).pipe(C(t=>t?.results??[]))}getBySlug(t){return this.http.get(c.getUrl(t,"companies"))}updateCompany(t,r){return this.http.put(c.getUrl(`${t}/update`,"companies"),r)}patchCompany(t,r){return this.http.patch(c.getUrl(`${t}/update`,"companies"),r)}deleteCompany(t){return this.http.delete(c.getUrl(`${t}/delete`,"companies"))}static \u0275fac=function(r){return new(r||s)(d(D))};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{y as a,_ as b,A as c};
